import{ao as e,aH as t,aI as s,at as i,aJ as a,aK as o,I as n,a as r,aL as m,f as c,q as l,aM as d,aN as _,aO as h,ak as p,ad as u}from"./topic.mg5xph6vf09b6144.js";import{h as w}from"./moment.mg5xph6v07db360f.js";import{m as g,A as k,D as S,a as v}from"./private_share.mg5xph6v1a0c9c7e.js";import{i as C,a as f,j as y,c as b,m as x,d as T,u as E}from"./comm_utils.mg5xph6v4fda8a3d.js";import{p as R}from"./page_utils.mg5xph6vb076ad9f.js";import{n as N}from"./_plugin-vue2_normalizer.mg5xph6vfc2fb13f.js";import{o as P}from"./page_utils.mg5xph6v15e313ed.js";import{d as A}from"./render_utils.mg5xph6ve4f7af7e.js";import{s as j}from"./localstorage.mg5xph6v9e7e21e8.js";import{f as D,a as L}from"./search_fixed_bar_ls.mg5xph6v5a0b0c23.js";const $=N({props:{extClass:{type:String,default:""},content:{type:String,default:""},isShow:{type:Boolean,default:!1}}},(function(){var e=this,t=e._self._c;return e.isShow?t("div",{class:e.extClass,on:{touchstart:function(e){e.preventDefault()}}},[t("div",{staticClass:"weui-mask_transparent"}),t("div",{staticClass:"weui-toast"},[e._m(0),t("p",{staticClass:"weui-toast__content js_loading_content"},[e._v(e._s(e.content))])])]):e._e()}),[function(){var e=this._self._c;return e("span",{staticClass:"weui-primary-loading weui-icon_toast"},[e("span",{staticClass:"weui-primary-loading__dot"})])}],!1,null,null,null,null).exports,O=window.Vue;let W=null;function I(){if(W)return;const e=O.extend($);W=new e,W.vm=W.$mount(),O.prototype.$isServer||document.body.appendChild(W.vm.$el)}const M={show(e="",t=""){I(),W.vm.content=e,W.vm.extClass=t,W.vm.isShow=!0},hide(){I(),W.vm.content="",W.vm.isShow=!1}};const H=N({name:"mp-link-source-dialog",props:{isLinkSourceDialogShow:{type:Boolean,default:!1},title:{type:String,default:""},desc:{type:String,default:""}},methods:{dialogCancel(){this.$emit("link-source-dialog-cancel")},dialogOk(){this.$emit("link-source-dialog-ok")}}},(function(){var e=this,t=e._self._c;return e.isLinkSourceDialogShow?t("div",{attrs:{role:"dialog","aria-modal":"true",tabindex:"0","aria-labelledby":"js_link_dialog_body"}},[t("div",{staticClass:"weui-mask"}),t("div",{staticClass:"weui-dialog weui-dialog_link"},[e.title?t("div",{staticClass:"weui-dialog__hd"},[t("strong",{staticClass:"weui-dialog__title",attrs:{tabindex:"0"}},[e._v(e._s(e.title))])]):e._e(),e.desc?t("div",{staticClass:"weui-dialog__bd"},[e._v(e._s(e.desc))]):e._e(),t("div",{staticClass:"weui-dialog__ft"},[t("a",{staticClass:"weui-dialog__btn weui-dialog__btn_default",attrs:{role:"button",href:"javascript:void(0);"},on:{click:e.dialogCancel}},[e._v("取消")]),t("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{role:"button",href:"javascript:void(0);"},on:{click:e.dialogOk}},[e._v("允许")])])])]):e._e()}),[],!1,null,null,null,null).exports;const B=N({name:"mp-love-tips",props:{show:{type:Boolean,default:!1}},data:()=>({loveTipsStatus:0}),watch:{show:{handler(e){e?this.showLoveTips():this.hideLoveTips()},immediate:!0}},methods:{showLoveTips(){1!==this.loveTipsStatus&&(this.loveTipsStatus=1,clearTimeout(this.__showLoveTipsTimer),clearTimeout(this.__hideLoveTipsTimer),this.__showLoveTipsTimer=setTimeout((()=>{this.hideLoveTips()}),5e3))},hideLoveTips(){1===this.loveTipsStatus&&(this.loveTipsStatus=100,clearTimeout(this.__showLoveTipsTimer),clearTimeout(this.__hideLoveTipsTimer),this.__hideLoveTipsTimer=setTimeout((()=>{this.loveTipsStatus=0}),300))}}},(function(){var e=this,t=e._self._c;return e.loveTipsStatus?t("div",{staticClass:"weui-toast weui-toast_bottom",class:[1===e.loveTipsStatus?"weui-animate-slide-up":"",100===e.loveTipsStatus?"weui-animate-fade-out":""],attrs:{role:"alert"}},[e._m(0)]):e._e()}),[function(){var e=this._self._c;return e("div",{staticClass:"weui-toast_bottom__hd"},[e("i",{staticClass:"weui-toast_bottom__icon weui-icon-filled-love"}),this._v("朋友将在视频号看到你推荐的内容 ")])}],!1,null,null,null,null).exports;window.Vue.use(e);const F="submitMsgToTL",U=200,K=["“”","‘’","（）","《》","〈〉","「」","『』","〔〕","【】","［］","[]","｛｝","{}","()","<>"],z=g.isNewMpApp;let J=!1;const V={supportZaikanAutho:(S.os.iphone||S.os.ipad)&&g.isWechat&&g.gtVersion("8.0.19",1)||S.os.android&&g.isWechat&&g.gtVersion("8.0.19",1),pcLikeAndShareCommentEnter:g.isWechat&&S.os.pc,supportShareCustom:(S.os.iphone||S.os.ipad)&&g.isWechat&&g.gtVersion("8.0.17",1),isHaoKanSwitchOn:!0},G=(e,t)=>{let s=!1;const i=e,a=t||0,o=/(WindowsNT)|(Windows NT)|(Macintosh)/i.test(navigator.userAgent),n=S.os.ios||o?1566025200:1565971200;return parseInt(a,10)>n&&i<1586325600&&(s=!0),s};const Y=N({name:"mp-like-read-area",props:{statStyle:{type:Number,default:0},showBottomBar:{type:Boolean,default:!1}},components:{[t.name]:t,[s.name]:s,[i.name]:i,[B.name]:B,[a.name]:a,[o.name]:o,[H.name]:H,Intersect:n,fixedSearch:D},data:()=>({isRecommendPanelShow:!1,isEducatePanelShow:!1,isWowClosePanelShow:!1,isRecommendToastShow:!1,recommendToastMsg:"",isRecommendCommentPanelShow:!1,loading:!1,recommendSending:!1,recommendComment:"",recommendCommentDisable:!0,recommentCommentErrDomStyle:"visibility: hidden",isEuropean:!1,focusTag:!1,goingWOW:!1,startY:null,scrollTop:null,recommendCommentMsg:0,hasShowEducate:!1,isNarrowStyle:!1,showWriteCommentBtn:!1,pcLikeAndShareCommentEnter:V.pcLikeAndShareCommentEnter,pcLikeAndShareCommentEnterShow:!1,pcLikeAndShareComment:!1,showWowTips:!1,showFinderLovedTips:!1,isHaoKanSwitchOn:V.isHaoKanSwitchOn,isNewMpApp:z,islinkSourceDialog:!1,linkSourceDialogDesc:"",redirectUrl:"",linkSourceOpt:null}),watch:{recommendComment(e){const t=e.replace(/^\s+|\s+$/g,"");let s;t.length>U?(s=t.length,this.recommentCommentErrDomStyle="visibility: visible"):this.recommentCommentErrDomStyle="visibility: hidden",t.length>0&&t.length<=U?this.recommendCommentDisable=!1:this.recommendCommentDisable=!0,this.recommendCommentMsg=s},hasExtAppmsgStat(){this.judgeWidth()},displayCountNum(e){if(e){let e=this.readNum;G(this.$store.state.cgiData.ct,this.$store.state.cgiData.ori_send_time)&&(e=this.videoUv),j(e)}}},computed:{...r(m.name,["productKeyword","productList","searchWordStyle"]),...c("mp-like-and-share",["hasExtAppmsgStat","collectShow"]),...c("mp-comment",["commentCount"]),...r("mp-stream",["articleFoldStatus"]),...r({copyrightStatus:e=>e.cgiData.copyright_stat,needPayStatus:e=>e.cgiData.need_pay,readNumShow:e=>{var t,s,i;return(null==(s=null==(t=e.extRes)?void 0:t.appmsgstat)?void 0:s.show)||(null==(i=e.cgiData)?void 0:i.read_show_new)||0},shareShow:e=>e.extRes.share_flag.show&&!g.isInMiniProgram,praiseNum:e=>e.extRes.appmsgstat.old_like_num,praiseShow:e=>e.extRes.appmsgstat.show_old_like,favShow:e=>e.extRes.favorite_flag.show&&!g.isInMiniProgram,recommendNum:e=>e.extRes.appmsgstat.like_num,scCommentNum:e=>e.scCommentNum,scCommentShow:e=>1*e.cgiData.item_show_type==17&&1*e.urlParams.sc_list==1,recommendShow:e=>e.extRes.appmsgstat.show_like&&!g.isInMiniProgram&&1*e.cgiData.item_show_type!=17,shareGray:e=>e.extRes.share_flag.show_gray,praiseGray:e=>e.extRes.appmsgstat.show_old_like_gray,recommendGray:e=>e.extRes.appmsgstat.show_gray,favGray:e=>e.extRes.favorite_flag.show_gray,videoUv:e=>e.extRes.appmsgstat.video_uv,readNum:e=>{var t,s;return e.cgiData.is_temp_url?e.cgiData.read_num:(null==(t=e.extRes.appmsgstat)?void 0:t.read_num)||(null==(s=e.cgiData)?void 0:s.read_num_new)||0},recommendPrompted:e=>e.extRes.appmsgstat.prompted,isPaySubscribe:e=>e.cgiData.is_pay_subscribe,isFinderVideo:e=>e.cgiData.is_finder_video&&!g.isInMiniProgram,friendLikeNum:e=>e.extRes.appmsgstat.friend_like_num,appmsgstatStyle:e=>e.extRes.appmsgstat.style,source:e=>e.cgiData.source,hasRecommended:e=>e.extRes.appmsgstat.liked,hasPraised:e=>e.extRes.appmsgstat.old_liked,itemShowType:e=>e.cgiData.item_show_type,kanyikanVideoEducatePic:e=>e.cgiData.kanyikan_video_educate_pic,kanyikanEducatePic:e=>e.cgiData.kanyikan_educate_pic,isTempUrl:e=>e.cgiData.is_temp_url,finderExportId:e=>e.cgiData.finder_export_id,finderUpdateTime:e=>e.extRes&&e.extRes.appmsgstat&&e.extRes.appmsgstat.finder_update_time,finderPraiseNum:e=>{const t=e&&e.extRes&&e.extRes.appmsgstat&&e.extRes.appmsgstat||{};return t.finder_favd?Math.max(t.finder_fav_num||0,1):t.finder_fav_num||0},hasFinderPraised:e=>e&&e.extRes&&e.extRes.appmsgstat&&e.extRes.appmsgstat.finder_favd,finderPraiseShow:e=>e.cgiData.is_finder_video&&"true"!==e.cgiData.finder_ban,finderLoveNum:e=>{const t=e&&e.extRes&&e.extRes.appmsgstat&&e.extRes.appmsgstat||{};return t.finder_liked?Math.max(t.finder_like_num||0,1):t.finder_like_num||0},hasFinderLoved:e=>e&&e.extRes&&e.extRes.appmsgstat&&e.extRes.appmsgstat.finder_liked,finderLoveShow:e=>e.cgiData.is_finder_video&&"true"!==e.cgiData.finder_ban,claimSource:e=>e.cgiData.claim_source||window.claim_source||{},showAdMark:e=>e.cgiData.showAdMark}),commentShow(){return 2===this.statStyle},displayCountWording:()=>"阅读",displayCountNum(){let e="";return this.readNumShow&&(e=this.readNum,G(this.$store.state.cgiData.ct,this.$store.state.cgiData.ori_send_time)&&(e=this.videoUv),e=R.formatReadNum(e),""===e&&(e=0)),e},recommendWording(){let e="前往“发现”-“看一看”浏览“朋友在看";return this.friendLikeNum&&this.friendLikeNum>0&&(e="前往“发现”-“看一看”浏览"),e},displayPraisedNum(){return R.formatReadNum(this.praiseNum)},displayRecommendNum(){return R.formatReadNum(this.recommendNum)},displayCommentNum(){return R.formatReadNum(this.commentCount)},displayScCommentNum(){return R.formatReadNum(this.scCommentNum)},displayFinderPraiseNum(){return R.formatReadNum(this.finderPraiseNum)},displayFinderLoveNum(){return R.formatReadNum(this.finderLoveNum)},recommendCommentPanelTitle(){let e=this.$store.state.cgiData.msg_title;return 8===this.$store.state.cgiData.item_show_type&&(e=this.$store.state.cgiData.msg_desc),10===this.$store.state.cgiData.item_show_type&&(e=e.replace(/<(\/?)(?=((a(\s|>))|(\/a))).*?>/g,"")),e},viewSourceShow(){const e=this.$store.state.cgiData,t=this.$store.state.urlParams;return e.msg_source_url&&-1===[1,2,3].indexOf(e.reprint_style)&&1!==e.is_pay_subscribe&&"zxg"!==t.belong&&"industrynews"!==t.wwdistype},modifyTime(){const e=this.$store.state.cgiData.modify_time;if(!e)return"";return w(1e3*parseInt(e)).format("YYYY年MM月DD日")},ipDisplay(){const e=this.$store.state.cgiData.ip_wording;let t="";return e&&(t=C.getIpWoridng(e)),t},renderSearchFixedBar(){return this.productKeyword&&1*this.searchWordStyle==3}},methods:{initFixedSearch(){if(L.getLs())return this.$refs.fixedSearch.show(),void L.setLs();let e=!1;this._judgeFixedSearchShow=t=>{if(e&&!t)return;setTimeout((()=>e=!1),200),e=!0;const s=document.getElementById("js_read_area3"),i=document.getElementById("js_article_bottom_bar");if(!s||!i)return;s.getBoundingClientRect().top-i.getBoundingClientRect().top<0&&(this.$refs.fixedSearch.show(),L.setLs(),window.removeEventListener("scroll",this._judgeFixedSearchShow))},this._judgeFixedSearchShow(!0),window.addEventListener("scroll",this._judgeFixedSearchShow)},linkSourceDialogClickOk(){try{if("mp.weixin.qq.com"!==top.window.location.host)return void window.top.open(this.redirectUrl,"_blank")}catch(e){}if(this.linkSourceOpt)f(this.linkSourceOpt),y.setSum(381039,2,1);else{const e=this.$store.state.cgiData;b.report(10380,{bizuin:window.biz,MsgID:1*window.mid,ItemIdx:1*window.idx,url:e.refuteSourceUrl.htmlDecode(),SessionId:e.sessionid,EnterId:1*e.enterid,ExpType:e.exptype||"",UrlType:1},{realTime:!0,success:()=>{this.openSourceUrl()}}),y.setSum(381039,11,1)}this.islinkSourceDialog=!1},openSourceUrl(){l.hide(),g.isInMiniProgram||!g.isOnlyWechat?location.href=this.redirectUrl:P(this.redirectUrl,60,this.$store.state.cgiData.user_name)},clickSource(e){const t="".concat(window.location.protocol,"//");let s=e.indexOf("://")<0?t+e:e;if(s=s.htmlDecode(),-1!=s.indexOf("mp.weixin.qq.com/s")||-1!=s.indexOf("mp.weixin.qq.com/mp/appmsg/show")||-1!=s.indexOf("mp.weixin.qq.com/mp/homepage")||-1!=s.indexOf("mp.weixin.qq.com/mp/profile_ext")){const e=s.split("#");s=x.addParam(e[0],"scene",25,!0)+(e[1]?"#"+e[1]:""),s=s.replace(/#rd$/g,"#wechat_redirect")}this.redirectUrl=s,l.show({alpha:.6}),this.islinkSourceDialog=!0,this.linkSourceDialogDesc=-1!==this.redirectUrl.indexOf("mp.weixin.qq.com")?"即将打开新的页面":"即将打开第三方页面"},viewSourceClick(){const e=this.$store.state.cgiData,t=e.msg_source_url.htmlDecode(),s={url:"/mp/advertisement_report"+location.search.replace("wx_header","del_wx_header")+"&report_type=3&action_type=0&url="+encodeURIComponent(t)+"&ascene="+encodeURIComponent(e.ascene||-1)+"&__biz="+window.biz+"&r="+Math.random()+"&exptype="+e.exptype+"&expsessionid="+e.expsessionid+"&sessionid="+e.sessionid+"&enterid="+e.enterid,type:"GET",mayAbort:!0,async:!1,timeout:2e3};s.complete=()=>{this.openSourceUrl()},this.linkSourceOpt=s,this.clickSource(e.msg_source_url),y.setSum(381039,1,1)},clickRefuteSrc(){const e=this.$store.state.cgiData.refuteSourceUrl.replace("http://","https://");this.clickSource(e),y.setSum(381039,10,1)},linkSourceDialogClickCancel(){l.hide(),this.islinkSourceDialog=!1,this.linkSourceOpt?y.setSum(381039,3,1):y.setSum(381039,12,1)},cancelAutoNext(e){this.$store.hasModule("mp-video-player")&&this.$store.dispatch("mp-video-player/auto-next-plugin/cancelAutoNextWhenTipsShowed",e)},share(){this.shareGray||(this.$store.dispatch("".concat(d.name,"/").concat(_.ACTIONS.REPORT_SHARE_CLICK)),this.statStyle&&V.supportShareCustom?(this.isRecommendPanelShow=!1,this.$emit("share")):k.invoke("handleMPPageAction",{action:"share"}),this.renderProfile(["share"]),this.$store.hasModule("mp-related-article")&&this.$store.commit("mp-related-article/setSources",["share"]),b.report(27894,{bizuin:window.biz,msgid:1*window.mid,idx:1*window.idx,sessionid:window.sessionid,itemshowtype:+window.item_show_type||0,devicewidth:document.body.clientWidth,nickwrapped:this.__nickNameWrapped?1:0,actiontype:2,actionitem:2,style:this.statStyle?2:1,exptype:window.exptype||""}))},collect(){this.cancelAutoNext(8),window.customShareSource=2,k.invoke("handleMPPageAction",{action:"doFavorite"}),this.renderProfile(["collect"]),this.$store.hasModule("mp-related-article")&&this.$store.commit("mp-related-article/setSources",["favorite"]),this.statStyle&&(this.isRecommendPanelShow=!1,k.invoke("vibrateShort",{style:"medium"},(e=>{console.log("vibrateShort",e)}))),b.report(27894,{bizuin:window.biz,msgid:1*window.mid,idx:1*window.idx,sessionid:window.sessionid,itemshowtype:+window.item_show_type||0,devicewidth:document.body.clientWidth,nickwrapped:this.__nickNameWrapped?1:0,actiontype:2,actionitem:3,style:this.statStyle?2:1,exptype:window.exptype||""}),this.$store.state.cgiData.is_temp_url||this.$store.dispatch("".concat(d.name,"/").concat(_.ACTIONS.SET_COLLECT_STATUS),{hasCollected:!0})},renderProfile(e){this.$store.hasModule("mp-like-profile")&&this.$store.commit("mp-like-profile/setSources",e)},praise(e,t=!1){this.cancelAutoNext(7);const s=!this.$store.state.extRes.appmsgstat.old_liked;if((s||!t)&&(console.log("hasPraised next status:",s),!this.praiseGray)){this.$store.state.cgiData.is_temp_url?window.weui.alert("预览状态下无法操作"):(this.$store.dispatch("".concat(d.name,"/").concat(_.ACTIONS.SET_PRAISE_STATUS),{hasPraised:s}),1*this.itemShowType==17&&k.invoke("handleHaokanAction",{permission:0,recommend:0,action:"submitMsgToTL",server_data:JSON.stringify({id:"".concat(A(this.$store.state.cgiData.biz),"-").concat(this.$store.state.cgiData.mid,"-").concat(this.$store.state.cgiData.idx),opType:"LIKE",isLike:!!s,origin:"shortcontent"})}),s&&this.statStyle&&k.invoke("vibrateShort",{style:"medium"},(e=>{console.log("vibrateShort",e)})));let e=3;s&&(this.renderProfile(["like"]),e=2),this.statStyle&&(this.isRecommendPanelShow=!1),this.$store.hasModule("mp-related-article")&&this.$store.commit("mp-related-article/setSources",["praise"]),b.report(27894,{bizuin:window.biz,msgid:1*window.mid,idx:1*window.idx,sessionid:window.sessionid,itemshowtype:+window.item_show_type||0,devicewidth:document.body.clientWidth,nickwrapped:this.__nickNameWrapped?1:0,actiontype:e,actionitem:1,style:this.statStyle?2:1,exptype:window.exptype||""})}},sendRecommendErrCallBack(e){e.length>U?window.weui.alert("想法不可以超过#value#字".replace("#value#",U)):window.weui.alert("网络异常，请稍后再试")},cancelPcComment(){this.pcLikeAndShareComment=!1},showPcComment(){this.pcLikeAndShareComment=!0,this.hidePcLikeAndShareCommentEnter()},sendPcComment(e){this.cancelAutoNext(5);let{hasRecommended:t,actionType:s,comment:i}=this.initRecommendData("mpCommentDialog",e);t=!0,s=4,this.pcLikeAndShareComment=!1,this.showWriteCommentBtn=!0,this.sendRecommend({errCallback:this.sendRecommendErrCallBack,sucCallback:()=>{this.showToast("已发送"),J=!1},recommendData:{hasRecommended:t,comment:i,actionType:s,clickType:"sendComment"}})},webClickCommend(e,t,s){if(this.$store.state.cgiData.is_temp_url)window.weui.alert("预览状态下无法操作");else if("webClick"===t){const i=this;console.time("checkSyncHaoKanPermission");let a=3;if(i.hasRecommended||(a=2),b.report(27894,{bizuin:window.biz,msgid:1*window.mid,idx:1*window.idx,sessionid:window.sessionid,itemshowtype:+window.item_show_type||0,devicewidth:document.body.clientWidth,nickwrapped:this.__nickNameWrapped?1:0,actiontype:a,actionitem:4,style:this.statStyle?2:1,exptype:window.exptype||""}),V.supportZaikanAutho&&!i.hasRecommended)return void WeixinJSBridge.invoke("handleHaokanAction",{action:"checkSyncHaoKanPermission"},(function(a){const o=a.result;console.log("[Appmsg zaikan click] isZaiKanAutho: ".concat(o)),console.timeEnd("checkSyncHaoKanPermission"),T.log("[Appmsg zaikan click] isZaiKanAutho: ".concat(o)),0!==o&&i.recommend(e,t,s)}));i.recommend(e,t,s)}},initRecommendData(e,t){const s=!this.hasRecommended,i=s?1:2;let a;return a=["jsapi","mpCommentDialog"].indexOf(e)>-1?t:this.recommendComment.replace(/^\s+|\s+$/g,""),{hasRecommended:s,actionType:i,comment:a}},sendRecommend(e){const{errCallback:t,sucCallback:s,recommendData:i}=e,{hasRecommended:a,comment:o,actionType:n,clickType:r}=i;this.recommendGray||this.recommendSending||(this.$store.state.cgiData.is_temp_url?window.weui.alert("预览状态下无法操作"):(!this.statStyle&&!S.os.pc&&M.show("发送中"),this.recommendSending=!0,this.$store.dispatch("".concat(d.name,"/").concat(_.ACTIONS.SET_RECOMMEND_STATUS),{hasRecommended:a,comment:o,type:n,styleType:this.pcLikeAndShareCommentEnter?2:this.appmsgstatStyle}).then((e=>{this.recommendSending=!1,!this.statStyle&&!S.os.pc&&M.hide(),0!==e.base_resp.ret?"function"==typeof t&&t(o):("function"==typeof s&&s(a,r,e.has_comment),((e,t)=>{const s={origin:"mp",isLike:e?1:0,url:encodeURIComponent(window.msg_link.html(!1)),content:t||""};k.invoke("handleHaokanAction",{action:F,recommend:e?1:0,server_data:JSON.stringify(s)},(function(e){console.log("handleHaokanAction",e)})),k.invoke("handleHaokanAction",{action:"update_recommend_status",permission:1,recommend:e?1:0},(function(e){console.log("handleHaokanAction for client",e)})),window.__article_liked__=e})(a,o),this.$emit("liked",a,o))})).catch((e=>{console.log("recommend error",e),this.recommendSending=!1,M.hide(),window.weui.alert("网络异常，请稍后再试")})),a&&this.renderProfile(["zaikan"]),this.$store.hasModule("mp-related-article")&&this.$store.commit("mp-related-article/setSources",["like"])))},recommend(e,t,s,i=!1){this.cancelAutoNext(5);let{hasRecommended:a,actionType:o,comment:n}=this.initRecommendData(t,s);if("sendComment"===t&&(a=!0,o=4,this.recommendPrompted&&(this.isRecommendPanelShow=!1),this.isRecommendCommentPanelShow=!1,this.enableMove(),this.$refs.recommendCommentArea.removeEventListener("blur",this.commentTextBlur)),this.showWriteCommentBtn="jsapi"!==t&&"sendComment"===t,this.sendRecommend({errCallback:this.sendRecommendErrCallBack,sucCallback:(e,t,s)=>{"sendComment"===t?this.showToast("已发送"):(this.$store.commit("SET_RECOMMEND_STATUS",{hasRecommended:!this.hasRecommended}),"webClick"===t&&this.hasRecommended&&this.statStyle&&k.invoke("vibrateShort",{style:"medium"},(e=>{console.log("vibrateShort",e)})),e?(this.$store.commit("SET_RECOMMEND_NUM",{recommendNum:this.recommendNum+1}),"webClick"!==t&&"jsapi"!==t||(S.os.pc?this.showPcLikeAndShareCommentEnter():1!==this.appmsgstatStyle&&(i||(this.isRecommendPanelShow=!0),this.recommendPrompted||(this.hasShowEducate=!0,this.isEducatePanelShow=!0))),2!==this.appmsgstatStyle&&3!==this.appmsgstatStyle||(this.recommendComment=""),!this.statStyle&&!S.os.pc&&this.showToast("在看 "),this.$nextTick((()=>{this.$refs.recommendPanel}))):(this.$store.commit("SET_RECOMMEND_NUM",{recommendNum:this.recommendNum-1}),this.isRecommendPanelShow=!1,this.isEducatePanelShow=!1,s?this.pcLikeAndShareCommentEnter?window.weui.alert("已取消，想法已同步删除",{className:"like_cancel_alert",buttons:[{label:"我知道了",type:"primary"}]}):window.weui.alert("已取消，想法已同步删除"):this.showToast("已取消"),this.hidePcLikeAndShareCommentEnter(),J=!1))},recommendData:{hasRecommended:a,comment:n,actionType:o,clickType:t}}),"webClick"===t){const t=this.$refs["oprChilds-4"].getBoundingClientRect();T.log("[Appmsg zaikan location] top: ".concat(t.top," left: ").concat(t.left," bottom: ").concat(t.bottom," right: ").concat(t.right)),T.log("[Appmsg zaikan click] clientX: ".concat(e.clientX," clientY: ").concat(e.clientY))}},finderPraise(){if(this.isTempUrl)return void window.weui.alert("预览状态下不能操作");const e=this.$store.state.cgiData.finder_bypass_info;if(!this.isFinderVideo||!e)return;const t=this.hasFinderPraised,s=!this.hasFinderPraised,i=this.finderPraiseNum+(t?-1:1);this.$store.commit("SET_FINDER_PRAISE_STATUS",{favd:s}),this.$store.commit("SET_FINDER_PRAISE_NUM",{praiseNum:i});const a=g.isIOS&&g.gtVersion("8.0.30",!0)||g.isAndroid&&g.gtVersion("8.0.31",!0);new Promise((t=>{a?(k.invoke("handleVideoAction",{action:"operateFinderVideo",data:e,isFav:s},(e=>t(e))),y.setSum(332407,26,1)):h?(p({url:"/cgi-bin/micromsg-bin/pc_finderfav",cmdId:5237,scope:"mmbiz_mpfinderh5",data:JSON.stringify({export_id:this.finderExportId,optype:s?1:2,fav_id:Date.now()}),success(e){t(e)}}),y.setSum(332407,27,1)):window.weui.alert("请升级微信客户端版本后查看")})).then((e=>{console.log("[Finder] Praise",e,{oriStatus:t,targetStatus:s,targetNum:i}),e&&e.BaseResponse&&("-4006"==="".concat(e.BaseResponse.Ret)||"-4007"==="".concat(e.BaseResponse.Ret))&&window.weui.alert("你被禁止点赞当前视频，详情见微信团队通知。")})),y.setSum(332407,25,1)},finderLove(){if(this.isTempUrl)return void window.weui.alert("预览状态下不能操作");const e=this.$store.state.cgiData.finder_bypass_info;if(!this.isFinderVideo||!e)return;const t=this.hasFinderLoved,s=!this.hasFinderLoved,i=this.finderLoveNum+(t?-1:1);this.$store.commit("SET_FINDER_LOVE_STATUS",{liked:s}),this.$store.commit("SET_FINDER_LOVE_NUM",{likeNum:i}),this.showFinderLovedTips=s;const a=g.isIOS&&g.gtVersion("8.0.30",!0)||g.isAndroid&&g.gtVersion("8.0.31",!0);new Promise((t=>{a?(k.invoke("handleVideoAction",{action:"operateFinderVideo",data:e,isLike:s},(e=>t(e))),y.setSum(332407,32,1)):h?(p({url:"/cgi-bin/micromsg-bin/pc_finderlike",cmdId:4220,scope:"mmbiz_mpfinderh5",data:JSON.stringify({export_id:this.finderExportId,optype:s?3:4,likeid:Date.now()}),success(e){t(e)}}),y.setSum(332407,33,1)):window.weui.alert("请升级微信客户端版本后查看")})).then((e=>{console.log("[Finder] Like",e,{oriStatus:t,targetStatus:s,targetNum:i}),e&&e.BaseResponse&&("-4006"==="".concat(e.BaseResponse.Ret)||"-4007"==="".concat(e.BaseResponse.Ret))&&window.weui.alert("你被禁止点赞当前视频，详情见微信团队通知。")})),y.setSum(332407,31,1)},scrollToComment(){this.$emit("scroll-to-comment")},scComment(){const e=window.msg_link.html(!1);!function(e){const{url:t,itemShowType:s,openType:i,scene:a,subscene:o,canFastLoad:n}=e;g.isWechat?n?k.invoke("openWebViewUseFastLoad",{url:t,item_show_type:s,openType:i||0,scene:a||0,subscene:o||0},(e=>{console.log("openWebViewUseFastLoad res: ",e),e&&e.err_msg&&-1===e.err_msg.indexOf("ok")&&k.invoke("openUrlWithExtraWebview",{url:t,openType:1},(e=>{e&&e.err_msg&&-1===e.err_msg.indexOf("ok")&&(window.location.href=t)}))})):k.invoke("openUrlWithExtraWebview",{url:t,openType:1},(e=>{e&&e.err_msg&&-1===e.err_msg.indexOf("ok")&&(window.location.href=t)})):window.open(t)}({url:x.addParam(e,"scrolltodown","1",!0),itemShowType:17,canFastLoad:!0})},showToast(e){this.isRecommendToastShow=!0,this.recommendToastMsg=e,setTimeout((()=>{this.isRecommendToastShow=!1}),1e3)},commentAutho(){const e=this;V.supportZaikanAutho?WeixinJSBridge.invoke("handleHaokanAction",{action:"checkSyncCommentPermission"},(function(t){0!==t.result&&e.showCommentPanel()})):this.showCommentPanel()},showCommentPanel(){this.isRecommendCommentPanelShow=!0,this.recommendCommentDisable=!0,this.$store.dispatch("".concat(d.name,"/").concat(_.ACTIONS.REPORT_SHARE_CLICK)),this.$nextTick((()=>{this.$refs.recommendCommentArea.focus(),this.disableMove(),this.scrollTop=document.body.scrollTop||document.documentElement.scrollTop,this.$refs.recommendCommentArea.addEventListener("blur",this.commentTextBlur)})),this.$store.dispatch("".concat(d.name,"/").concat(_.ACTIONS.REPORT_OPEN_RECOMMEND_COMMENT))},hideCommentPanel(){console.log("hideCommentPanel",this.isRecommendCommentPanelShow),this.isRecommendCommentPanelShow=!1,this.enableMove(),this.$refs.recommendCommentArea.removeEventListener("blur",this.commentTextBlur)},doubleInput(e){S.os.ios&&e.data&&K.indexOf(e.data)>-1&&(this.focusTag=!0)},textareaDoubleHandler(){S.os.ios&&this.focusTag&&(this.$refs.recommendCommentArea.blur(),this.$refs.recommendCommentArea.focus(),this.focusTag=!1)},openWOW(){T.log("JSAPI turnOnHaoKanSwitch"),k.invoke("handleHaokanAction",{action:"turnOnHaoKanSwitch"},(e=>{e.err_msg&&"handleHaokanAction:ok"===e.err_msg?(this.goingWOW=!0,k.invoke("handleHaokanAction",{action:"jumpToWow",isJumpTabFindWhenBack:!0,isJumpTabHaoKan:!0,extParams:JSON.stringify({autoDropLoad:!0})},(e=>{this.goingWOW=!1,e.err_msg&&"handleHaokanAction:fail_entrance_not_open"===e.err_msg?this.isWowClosePanelShow=!0:(this.isHaoKanSwitchOn=!0,V.isHaoKanSwitchOn=!0)}))):this.isWowClosePanelShow=!0}))},goWOW(){if(T.log("JSAPI goWow, goingWOW:",this.goingWOW),!this.goingWOW){if(this.$store.dispatch("".concat(d.name,"/").concat(_.ACTIONS.REPORT_JUMP_TO_WOW),{action:this.isHaoKanSwitchOn?32:31}),T.log("JSAPI isHaoKanSwitchOn, isHaoKanSwitchOn:",this.isHaoKanSwitchOn),!this.isHaoKanSwitchOn)return void this.openWOW();this.goingWOW=!0;const e=performance.now();k.invoke("handleHaokanAction",{action:"jumpToWow",isJumpTabFindWhenBack:!0,isJumpTabHaoKan:!0,extParams:JSON.stringify({autoDropLoad:!0})},(t=>{const s=performance.now();T.log("JSAPI handleHaokanAction jumpToWow",s-e),this.goingWOW=!1,t.err_msg&&"handleHaokanAction:fail_entrance_not_open"===t.err_msg?this.openWOW():"handleHaokanAction:fail  action not support"===t.err_msg||"handleHaokanAction:fail, action not support"===t.err_msg?window.weui.alert("微信版本过低，暂不支持该操作"):"handleHaokanAction:ok"===t.err_msg&&(this.isRecommendPanelShow=!1),k.invoke("handleHaokanAction",{action:F,server_data:JSON.stringify({origin:"mp",autoDropLoad:!0})},(function(e){console.log("sendAutoDropLoad",e)}))}))}},disableMove(){document.addEventListener("touchmove",this.preventMove,{passive:!1}),this.$refs.recommendCommentArea.addEventListener("touchstart",this.getTouchStart,{passive:!1}),this.$refs.recommendCommentArea.addEventListener("touchmove",this.preventText,!1)},enableMove(){document.removeEventListener("touchmove",this.preventMove,{passive:!1}),this.$refs.recommendCommentArea.removeEventListener("touchstart",this.getTouchStart,{passive:!1}),this.$refs.recommendCommentArea.removeEventListener("touchmove",this.preventText,!1)},preventMove(e){const t=e.target;"TEXTAREA"!==t.tagName&&"BUTTON"!==t.tagName&&(e.preventDefault(),e.stopPropagation())},getTouchStart(e){const t=e.targetTouches||[];if(t.length>0){const e=t[0]||{};this.startY=e.clientY}},preventText(e){let t=!1;const s=e.changedTouches,i=this.$refs.recommendCommentArea.scrollTop,a=this.$refs.recommendCommentArea.offsetHeight,o=this.$refs.recommendCommentArea.scrollHeight;if(s.length>0){const n=(s[0]||{}).clientY;t=!(n>this.startY&&i<=0)&&!(n<this.startY&&i+a>=o),t||e.preventDefault()}},commentTextBlur(){window.scrollTo(0,this.scrollTop)},linkSourceExpose(){if(!this.$refs.linkSource)return;const e=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,t=this.$refs.linkSource.offsetTop||0;e+E.getInnerHeight()>t&&e<=t&&(this.$refs.linkSource.classList.contains("js_view_refute_source")?y.setSum(381039,9,1):y.setSum(381039,0,1),window.removeEventListener("scroll",this.linkSourceExpose))},likeExpose(){if(!this.$refs["oprChilds-4"])return;const e=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,t=this.$refs["oprChilds-4"].offsetTop;e+E.getInnerHeight()>t&&e<=t&&(this.$store.dispatch("".concat(d.name,"/").concat(_.ACTIONS.REPORT_RECOMMEND_EXPOSE)),window.removeEventListener("scroll",this.likeExpose))},educateExpose(){this.isEducatePanelShow&&!this.isEuropean&&E.getInnerHeight()>this.$refs.educatePanel.getBoundingClientRect().top&&this.$refs.educatePanel.getBoundingClientRect().top+this.$refs.educatePanel.getBoundingClientRect().height>0&&(this.$store.dispatch("".concat(d.name,"/").concat(_.ACTIONS.REPORT_EDUCATE_EXPOSE)),window.removeEventListener("scroll",this.educateExpose))},hidePcLikeAndShareCommentEnter(e){(1!==e||J)&&(this.pcLikeAndShareCommentEnterShow&&this.hasRecommended&&(J=!0),this.pcLikeAndShareCommentEnterShow=!1)},showPcLikeAndShareCommentEnter(e){(1!==e||J)&&(this.pcLikeAndShareCommentEnterShow=!0,1!==e&&setTimeout((()=>{!J&&this.hidePcLikeAndShareCommentEnter()}),5e3))},judgeWidth(){setTimeout((()=>{if(this.hasExtAppmsgStat){const e=this.$refs.mpToolBar.getBoundingClientRect().width,t=[];let s=0;for(let i=1;i<5;i++)this.$refs["oprChilds-"+i]&&t.push(this.$refs["oprChilds-"+i]);this.isNarrowStyle=!0,this.$nextTick((()=>{if(t&&t.length)for(let e=0;e<t.length;e++)s+=t[e].getBoundingClientRect().width;console.log("benchmarkWidth",e,s),t.length>1&&(e-s)/(t.length-1)<20&&this.$nextTick((()=>{let s=0;for(let e=0;e<t.length;e++)s+=t[e].getBoundingClientRect().width;(e-s)/(t.length-1)<20&&(this.isNarrowStyle=!0)}))}))}}),50)},onNickWrap(e){this.__nickNameWrapped=e},exposeItem(e){b.report(27894,{bizuin:window.biz,msgid:1*window.mid,idx:1*window.idx,sessionid:window.sessionid,itemshowtype:+window.item_show_type||0,devicewidth:document.body.clientWidth,nickwrapped:this.__nickNameWrapped?1:0,actiontype:1,actionitem:e,style:this.statStyle?2:1,exptype:window.exptype||""})}},mounted(){k.invoke("handleHaokanAction",{action:"isHaoKanSwitchOn",extParams:JSON.stringify({key:"isOpen"})},(e=>{console.log("JSAPI handleHaokanAction isHaoKanSwitchOn",e),void 0!==e.isOpen&&(this.isHaoKanSwitchOn=e.isOpen)})),this.$store.state.cgiData.appmsg_like_type&&2===this.$store.state.cgiData.appmsg_like_type?y.setSum(114217,0,1):this.$store.state.cgiData.appmsg_like_type&&1===this.$store.state.cgiData.appmsg_like_type&&y.setSum(114217,1,1),window.addEventListener("scroll",this.linkSourceExpose),window.addEventListener("scroll",this.likeExpose),window.addEventListener("scroll",this.educateExpose),window.addEventListener("resize",this.judgeWidth),u.onFontScaleChange(this.judgeWidth),this.linkSourceExpose(),v.on(document,"click",(()=>{this.hidePcLikeAndShareCommentEnter()}),!1),this._onHaoKan=e=>{if(window.__video_need_fe_fullscreen__&&window.__video_fullscreen__&&E.supportImmersiveMode)return;if(0===(0===parseInt(e.recommend,10)?0:1))this.recommend(null,"jsapi");else{const t=this;if(V.supportZaikanAutho)WeixinJSBridge.invoke("handleHaokanAction",{action:"checkSyncHaoKanPermission"},(function(e){0!==e.result&&(t.recommend(null,"jsapi",null,!0),window.weui.dialog({title:"已同步到看一看",content:t.isHaoKanSwitchOn?"前往「发现 > 看一看」，看更多朋友在看":"打开「发现 > 看一看」，看更多朋友在看",buttons:[{label:"取消",type:"default",onClick(){}},{label:t.isHaoKanSwitchOn?"前往":"打开并前往",type:"primary",onClick(){t.goWOW()}}],isAndroid:!1}))}));else{let s="";s=e.comment,t.recommend(null,"jsapi",s)}}},this.showBottomBar||k.on("menu:haokan",this._onHaoKan);const e=this.$watch((()=>this.renderSearchFixedBar),(t=>{t&&this.$nextTick((()=>{this.initFixedSearch(),e()}))}))},beforeDestroy(){window.removeEventListener("scroll",this.linkSourceExpose),window.removeEventListener("scroll",this.likeExpose),window.removeEventListener("scroll",this.educateExpose),window.removeEventListener("resize",this.judgeWidth),u.removeScaleChangeCbList(this.judgeWidth),this.showBottomBar||k.remove("menu:haokan",this._onHaoKan),this._judgeFixedSearchShow&&window.removeEventListener("scroll",this._judgeFixedSearchShow)}},(function(){var e=this,t=e._self._c;return t("div",{staticClass:"rich_media_tool__wrp"},[1!=e.copyrightStatus||1!=e.needPayStatus?t("div",{ref:"mpToolBar",staticClass:"rich_media_tool",attrs:{id:"js_content_end"}},[e.claimSource.claim_source||e.claimSource.aigc_type>0?t("div",{staticClass:"rich_media_info weui-flex policy_tips tips_global_primary claim_source_block"},[e.claimSource.claim_source?t("div",{staticClass:"media_tool_meta tips_global_primary meta_primary"},[e._v(" "+e._s(e.claimSource.claim_source))]):e._e(),e.claimSource.aigc_type>0&&1!==e.claimSource.claim_source_type?t("div",{staticClass:"media_tool_meta tips_global_primary meta_primary"},[e._v(" "+e._s(e.claimSource.aigc_wording))]):e._e()]):e._e(),2!==e.statStyle?t("div",{staticClass:"rich_media_info weui-flex",class:{rich_media_bottom:e.showBottomBar}},[e.viewSourceShow?t("a",{ref:"linkSource",staticClass:"media_tool_meta meta_primary js_wx_tap_highlight wx_tap_link",attrs:{id:"js_view_source",href:"javascript:;"},on:{click:e.viewSourceClick}},[e._v("阅读原文")]):e.$store.state.cgiData.refuteSourceUrl?t("a",{ref:"linkSource",staticClass:"media_tool_meta meta_primary js_wx_tap_highlight wx_tap_link js_view_refute_source",attrs:{href:"javascript:;"},on:{click:e.clickRefuteSrc}},[e._v("辟谣来源")]):e._e(),1==e.readNumShow&&1!=e.isPaySubscribe&&e.displayCountNum?t("div",{staticClass:"media_tool_meta tips_global_primary meta_primary js_media_tool_meta",attrs:{role:"option",id:"js_read_area3"}},[t("span",{attrs:{id:"readTxt"}},[e._v(e._s(e.displayCountWording))]),t("span",{attrs:{id:"readNum3"}},[e._v(" "+e._s(e.displayCountNum))])]):e._e(),e.modifyTime?t("div",{staticClass:"media_tool_meta tips_global_primary meta_primary",attrs:{role:"option"}},[e.modifyTime?t("span",[e._v("修改于"),t("span",[e._v(e._s(e.modifyTime))])]):e._e()]):e._e()]):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:e.hasExtAppmsgStat&&!e.articleFoldStatus&&!e.isNewMpApp&&!e.showBottomBar,expression:"hasExtAppmsgStat && !articleFoldStatus && !isNewMpApp && !showBottomBar"}],staticClass:"weui-flex sns_opr_area",class:{sns_opr_area_smart:e.statStyle},attrs:{id:"js_bottom_opr_right"}},[e.statStyle?[t("div",{staticClass:"sns_opr_area_primary"},[t("mp-like-profile",{attrs:{"stat-style":e.statStyle},on:{nickwrap:e.onNickWrap}})],1),e.hasExtAppmsgStat?t("div",{directives:[{name:"max-font-scale",rawName:"v-max-font-scale",value:1,expression:"1"}],staticClass:"sns_opr_area_extra"},[t("intersect",{attrs:{threshold:[0,.5]},on:{"~enter":function(t){return e.exposeItem(2)}}},[e.shareShow?t("span",{ref:"oprChilds-1",staticClass:"media_tool_meta meta_extra meta_share js_media_tool_meta",attrs:{id:"js_bottom_share"},on:{click:e.share}},[t("button",{staticClass:"sns_opr_btn sns_opr_btn_break sns_share_btn weui-wa-hotarea js_wx_tap_highlight wx_tap_link",attrs:{"aria-labelledby":"js_a11y_share_btn_txt",id:"js_bottom_share_btn",disabled:1===e.shareGray}},[t("span",{staticClass:"sns_opr_gap"},[e._v("分享")])])]):e._e()]),t("intersect",{attrs:{threshold:[0,.5]},on:{"~enter":function(t){return e.exposeItem(3)}}},[e.favShow?t("span",{ref:"oprChilds-2",staticClass:"media_tool_meta meta_extra meta_collect js_media_tool_meta",attrs:{id:"js_bottom_collect"},on:{click:e.collect}},[t("button",{staticClass:"sns_opr_btn sns_opr_btn_break sns_collect_btn weui-wa-hotarea js_wx_tap_highlight wx_tap_link",attrs:{id:"js_bottom_collect_btn",disabled:1===e.favGray}},[t("span",{staticClass:"sns_opr_gap"},[e._v("收藏")])])]):e._e()]),2!==e.statStyle?[t("intersect",{attrs:{threshold:[0,.5]},on:{"~enter":function(t){return e.exposeItem(4)}}},[e.recommendShow?t("span",{ref:"oprChilds-4",staticClass:"media_tool_meta meta_extra meta_like js_media_tool_meta",attrs:{id:"like3"},on:{click:function(t){return e.webClickCommend(t,"webClick")},mouseenter:function(t){return e.showPcLikeAndShareCommentEnter(1)},mouseleave:function(t){return e.hidePcLikeAndShareCommentEnter(1)}}},[t("button",{staticClass:"sns_opr_btn sns_opr_btn_break sns_like_btn weui-wa-hotarea js_wx_tap_highlight wx_tap_link",class:{like_btn_liked:e.hasRecommended},attrs:{"aria-labelledby":"js_a11y_like_btn_txt likeNum3","aria-describedby":e.hasRecommended?"js_a11y_like_btn_tips":"",id:"js_like_btn",disabled:1===e.recommendGray}},[e.recommendNum<1?t("span",{staticClass:"sns_opr_gap",attrs:{id:"js_like_wording","aria-hidden":"true"}},[e._v("在看")]):t("span",{staticClass:"sns_opr_num sns_opr_gap",attrs:{id:"likeNum3"}},[e._v(e._s(e.displayRecommendNum))])]),e.pcLikeAndShareCommentEnter&&!e.isTempUrl?t("mp-recommend-tips-pc",{attrs:{"aria-hidden":e.pcLikeAndShareCommentEnter?"true":"false",show:e.pcLikeAndShareCommentEnterShow},on:{"show-pc-comment":e.showPcComment}}):e._e()],1):e._e()])]:e._e(),t("intersect",{attrs:{threshold:[0,.5]},on:{"~enter":function(t){return e.exposeItem(1)}}},[e.praiseShow?t("span",{ref:"oprChilds-3",staticClass:"media_tool_meta meta_extra meta_praise js_media_tool_meta",class:{praised:e.hasPraised},attrs:{id:"like_old"},on:{click:e.praise}},[t("button",{staticClass:"sns_opr_btn sns_opr_btn_break sns_praise_btn weui-wa-hotarea js_wx_tap_highlight wx_tap_link",attrs:{"aria-labelledby":"js_a11y_zan_btn_txt likeNum_old","aria-describedby":e.hasPraised?"js_a11y_zan_btn_tips":"",disabled:1===e.praiseGray}},[e.praiseNum<1?t("span",{staticClass:"sns_opr_gap",attrs:{"aria-hidden":"true"}},[e._v("赞")]):t("span",{staticClass:"sns_opr_num sns_opr_gap",attrs:{id:"likeNum_old"}},[e._v(e._s(e.displayPraisedNum))])])]):e._e()]),e.commentShow?t("span",{ref:"oprChilds-5",staticClass:"media_tool_meta meta_extra meta_like js_media_tool_meta",on:{click:e.scrollToComment}},[t("button",{staticClass:"sns_opr_btn sns_opr_btn_break sns_sc_comment_btn weui-wa-hotarea js_wx_tap_highlight wx_tap_link",attrs:{"aria-labelledby":"commentCount",id:"js_comment_btn"}},[!e.commentCount||e.commentCount<1?t("span",{staticClass:"sns_opr_gap",attrs:{id:"js_comment_wording","aria-hidden":"true"}},[e._v("留言")]):t("span",{staticClass:"sns_opr_num sns_opr_gap"},[e._v(e._s(e.displayCommentNum))])])]):e.scCommentShow?t("span",{ref:"oprChilds-5",staticClass:"media_tool_meta meta_extra meta_like js_media_tool_meta",attrs:{id:"sc-comment"},on:{click:e.scComment}},[t("button",{staticClass:"sns_opr_btn sns_opr_btn_break sns_sc_comment_btn weui-wa-hotarea js_wx_tap_highlight wx_tap_link",attrs:{"aria-labelledby":"scCommentNum",id:"js_comment_btn"}},[e.scCommentNum<1?t("span",{staticClass:"sns_opr_gap",attrs:{id:"js_comment_wording","aria-hidden":"true"}},[e._v(" 评论 ")]):t("span",{staticClass:"sns_opr_num sns_opr_gap",attrs:{id:"scCommentNum"}},[e._v(" "+e._s(e.displayScCommentNum)+" ")])])]):e._e()],2):e._e()]:[e.hasExtAppmsgStat?[t("div",{staticClass:"sns_opr_area_primary"},[t("intersect",{attrs:{threshold:[0,.5]},on:{"~enter":function(t){return e.exposeItem(2)}}},[e.shareShow?t("span",{ref:"oprChilds-1",staticClass:"media_tool_meta meta_primary meta_share js_media_tool_meta",attrs:{id:"js_bottom_share"},on:{click:e.share}},[t("button",{staticClass:"sns_opr_btn sns_opr_btn_break sns_share_btn weui-wa-hotarea js_wx_tap_highlight wx_tap_link",attrs:{id:"js_bottom_share_btn",disabled:1===e.shareGray}},[t("span",{staticClass:"sns_opr_gap"},[e._v("分享")])])]):e._e()]),t("intersect",{attrs:{threshold:[0,.5]},on:{"~enter":function(t){return e.exposeItem(3)}}},[e.favShow?t("span",{ref:"oprChilds-2",staticClass:"media_tool_meta meta_primary meta_collect js_media_tool_meta",attrs:{id:"js_bottom_collect"},on:{click:e.collect}},[t("button",{staticClass:"sns_opr_btn sns_opr_btn_break sns_collect_btn weui-wa-hotarea js_wx_tap_highlight wx_tap_link",attrs:{id:"js_bottom_collect_btn",disabled:1===e.favGray}},[t("span",{staticClass:"sns_opr_gap"},[e._v("收藏")])])]):e._e()])],1),t("div",{staticClass:"sns_opr_area_extra"},[t("intersect",{attrs:{threshold:[0,.5]},on:{"~enter":function(t){return e.exposeItem(1)}}},[e.praiseShow?t("span",{ref:"oprChilds-3",staticClass:"media_tool_meta meta_extra meta_praise js_media_tool_meta",class:{praised:e.hasPraised},attrs:{id:"like_old"},on:{click:e.praise}},[t("button",{staticClass:"sns_opr_btn sns_opr_btn_break sns_praise_btn weui-wa-hotarea js_wx_tap_highlight wx_tap_link",attrs:{"aria-labelledby":"js_a11y_zan_btn_txt likeNum_old","aria-describedby":e.hasPraised?"js_a11y_zan_btn_tips":"",disabled:1===e.praiseGray}},[e.praiseNum<1?t("span",{staticClass:"sns_opr_gap",attrs:{"aria-hidden":"true"}},[e._v("赞")]):t("span",{staticClass:"sns_opr_num sns_opr_gap",attrs:{id:"likeNum_old"}},[e._v(e._s(e.displayPraisedNum))])])]):e._e()]),t("intersect",{attrs:{threshold:[0,.5]},on:{"~enter":function(t){return e.exposeItem(4)}}},[e.recommendShow?t("span",{ref:"oprChilds-4",staticClass:"media_tool_meta meta_extra meta_like js_media_tool_meta",attrs:{id:"like3"},on:{click:function(t){return e.webClickCommend(t,"webClick")},mouseenter:function(t){return e.showPcLikeAndShareCommentEnter(1)},mouseleave:function(t){return e.hidePcLikeAndShareCommentEnter(1)}}},[t("button",{staticClass:"sns_opr_btn sns_opr_btn_break sns_like_btn weui-wa-hotarea js_wx_tap_highlight wx_tap_link",class:{like_btn_liked:e.hasRecommended},attrs:{"aria-labelledby":"js_a11y_like_btn_txt likeNum3","aria-describedby":e.hasRecommended?"js_a11y_like_btn_tips":"",id:"js_like_btn",disabled:1===e.recommendGray}},[e.recommendNum<1?t("span",{staticClass:"sns_opr_gap",attrs:{id:"js_like_wording","aria-hidden":"true"}},[e._v("在看")]):t("span",{staticClass:"sns_opr_num sns_opr_gap",attrs:{id:"likeNum3"}},[e._v(e._s(e.displayRecommendNum))])]),e.pcLikeAndShareCommentEnter&&!e.isTempUrl?t("mp-recommend-tips-pc",{attrs:{"aria-hidden":e.pcLikeAndShareCommentEnter?"true":"false",show:e.pcLikeAndShareCommentEnterShow},on:{"show-pc-comment":e.showPcComment}}):e._e()],1):e._e()]),e.scCommentShow?t("span",{ref:"oprChilds-5",staticClass:"media_tool_meta meta_extra meta_like js_media_tool_meta",attrs:{id:"sc-comment"},on:{click:e.scComment}},[t("button",{staticClass:"sns_opr_btn sns_opr_btn_break sns_sc_comment_btn weui-wa-hotarea js_wx_tap_highlight wx_tap_link",attrs:{"aria-labelledby":"scCommentNum",id:"js_comment_btn"}},[e.scCommentNum<1?t("span",{staticClass:"sns_opr_gap",attrs:{id:"js_comment_wording","aria-hidden":"true"}},[e._v(" 评论 ")]):t("span",{staticClass:"sns_opr_num sns_opr_gap",attrs:{id:"scCommentNum"}},[e._v(" "+e._s(e.displayScCommentNum)+" ")])])]):e._e()],1)]:e._e()]],2)]):e._e(),e.renderSearchFixedBar?t("fixedSearch",{ref:"fixedSearch"}):e._e(),e.hasExtAppmsgStat?[e.isRecommendPanelShow&&!e.statStyle?t("div",{ref:"recommendPanel",staticClass:"like_comment_wrp",attrs:{role:"dialog",tabindex:"0","aria-hidden":e.isRecommendPanelShow?"false":"true",id:"js_like_comment"}},[t("div",{staticClass:"like_comment_inner"},[t("div",{staticClass:"like_comment_bd"},[t("div",{staticClass:"like_comment_tips",attrs:{id:"js_comment_area"}},[t("i",{staticClass:"weui-icon-success"}),e._v("已同步到看一看 "),1===e.appmsgstatStyle||e.showWriteCommentBtn?e._e():t("a",{staticClass:"like_comment_share_link",attrs:{href:"javascript:;",id:"js_like_comment_share"},on:{click:e.commentAutho}},[e._v("写下你的评论")])]),e.isEducatePanelShow?t("div",{ref:"educatePanel",staticClass:"like_comment_extra_info",attrs:{id:"js_like_educate"}},[t("p",{staticClass:"like_comment_extra_tips"},[e.friendLikeNum&&e.friendLikeNum>0?t("span",{attrs:{id:"js_friend_like_area"}},[e._v(e._s(e.friendLikeNum)+"位朋友也在看,")]):e._e(),t("span",{attrs:{id:"js_friend_like_word"}},[e._v(e._s(e.recommendWording))])]),t("p",{staticClass:"like_comment_pic_wrp"},[5==e.itemShowType?t("img",{staticClass:"like_comment_pic",attrs:{alt:"示意图",src:e.kanyikanVideoEducatePic}}):t("img",{staticClass:"like_comment_pic",attrs:{alt:"示意图",src:e.kanyikanEducatePic}})]),1!==e.appmsgstatStyle?t("button",{staticClass:"weui-btn weui-btn_primary",attrs:{id:"js_go_wow"},on:{click:e.goWOW}},[e._v("前往看一看")]):e._e()]):e._e()])])]):e._e(),e.statStyle?t("mp-like-tips",{staticClass:"like_bottom_toast",attrs:{show:e.isRecommendPanelShow,"is-hao-kan-switch-on":e.isHaoKanSwitchOn},on:{"go-wow":e.goWOW,"write-comment":e.commentAutho}}):e._e(),e.isWowClosePanelShow?t("div",{attrs:{role:"dialog","aria-modal":"true",tabindex:"0",id:"wow_close_inform"}},[t("div",{staticClass:"weui-mask"}),t("div",{staticClass:"weui-dialog"},[e._m(0),t("div",{staticClass:"weui-dialog__bd"},[e._v(" 在“设置”-“通用”-“发现页管理”打开“看一看”入口 ")]),t("div",{staticClass:"weui-dialog__ft",attrs:{id:"wow_close_ack"}},[t("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;",role:"button"},on:{click:function(t){e.isWowClosePanelShow=!1}}},[e._v("我知道了")])])])]):e._e(),e.isRecommendToastShow?t("div",{attrs:{role:"alert",id:"js_like_toast"}},[t("div",{staticClass:"weui-mask_transparent"}),t("div",{staticClass:"weui-toast"},[t("i",{staticClass:"weui-icon-success-no-circle weui-icon_toast"}),t("p",{staticClass:"weui-toast__content",attrs:{id:"js_toast_msg"}},[e._v(e._s(e.recommendToastMsg))])])]):e._e(),e.isRecommendCommentPanelShow?t("div",{attrs:{id:"js_comment_panel"}},[t("div",{staticClass:"like_comment_primary_wrp editing",attrs:{role:"dialog","aria-modal":"true",tabindex:"0","aria-hidden":e.isRecommendCommentPanelShow?"false":"true",id:"js_comment_wrp"}},[t("div",{staticClass:"like_comment_primary_inner"},[t("div",{staticClass:"like_comment_primary_hd"},[t("div",{staticClass:"like_comment_primary_hd_side"},[t("button",{staticClass:"like_comment_primary_cancel",attrs:{id:"js_comment_cancel"},on:{click:e.hideCommentPanel}},[e._v(" 取消 "),t("i",{staticClass:"weui-icon-close-thin"})])]),t("h4",{staticClass:"like_comment_primary_title"},[e._v(" 发送到看一看 ")]),t("div",{staticClass:"like_comment_primary_hd_side"},[t("button",{staticClass:"like_comment_primary_btn",attrs:{id:"js_comment_confirm",disabled:!0===e.recommendCommentDisable},on:{click:function(t){return e.recommend(t,"sendComment")}}},[e._v("发送")])])]),t("div",{staticClass:"like_comment_primary_bd"},[t("div",{staticClass:"like_comment_media_title",attrs:{id:"js_panel_like_title"}},[e._v(" "+e._s(e.recommendCommentPanelTitle)+" ")]),t("div",{staticClass:"like_comment_textarea_wrp"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.recommendComment,expression:"recommendComment"}],ref:"recommendCommentArea",staticClass:"like_comment_textarea weui-textarea",attrs:{placeholder:"写下你的想法...",id:"js_comment_text"},domProps:{value:e.recommendComment},on:{input:[function(t){t.target.composing||(e.recommendComment=t.target.value)},function(t){return e.doubleInput(t)}],click:e.textareaDoubleHandler}})]),t("div",{staticClass:"like_comment_counter like_comment_counter_warn",style:e.recommentCommentErrDomStyle,attrs:{id:"js_like_comment_msg"}},[e._v("最多200字，当前共"),t("span",{attrs:{id:"js_like_current_cnt"}},[e._v(e._s(e.recommendCommentMsg))]),e._v("字")])])])]),t("div",{staticClass:"like_comment_primary_mask",attrs:{id:"js_mask_2"},on:{click:e.hideCommentPanel}})]):e._e(),e.loading?t("div",{attrs:{id:"js_loading",role:"alert"}},[t("div",{staticClass:"weui-mask_transparent"}),e._m(1)]):e._e(),t("mp-comment-dialog",{attrs:{"is-comment-dialog-show":e.pcLikeAndShareComment,"comment-target-article-title":e.recommendCommentPanelTitle},on:{"send-dialog-recommend":function(t){return e.sendPcComment(t)},"send-dialog-cancel":e.cancelPcComment}})]:e._e(),t("mp-link-source-dialog",{attrs:{"is-link-source-dialog-show":e.islinkSourceDialog,desc:e.linkSourceDialogDesc},on:{"link-source-dialog-ok":e.linkSourceDialogClickOk,"link-source-dialog-cancel":e.linkSourceDialogClickCancel}})],2)}),[function(){var e=this._self._c;return e("div",{staticClass:"weui-dialog__hd"},[e("strong",{staticClass:"weui-dialog__title"},[this._v("看一看入口已关闭")])])},function(){var e=this._self._c;return e("div",{staticClass:"weui-toast"},[e("span",{staticClass:"weui-primary-loading weui-icon_toast"},[e("span",{staticClass:"weui-primary-loading__dot"})]),e("p",{staticClass:"weui-toast__content"},[this._v("发送中")])])}],!1,null,null,null,null).exports;export{Y as L};
