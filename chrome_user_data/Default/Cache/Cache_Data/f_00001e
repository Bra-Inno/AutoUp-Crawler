import{B as e,aD as t,a as i,g as s,I as a,f as o,at as n,b7 as r,b8 as l}from"./topic.mg5xph6vf09b6144.js";import{a as c,j as d,u as m,m as h,c as p}from"./comm_utils.mg5xph6v4fda8a3d.js";import{n as u}from"./_plugin-vue2_normalizer.mg5xph6vfc2fb13f.js";import{A as C,m as _,D as w,a as g}from"./private_share.mg5xph6v1a0c9c7e.js";import{i as b}from"./mobile_click.mg5xph6v1482f068.js";import{t as v}from"./appmsgext.mg5xph6v82836ebd.js";import{o as f}from"./page_utils.mg5xph6v15e313ed.js";import{s as H}from"./safe_area_insets.mg5xph6v7f72fb96.js";!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".reason-wrapper[data-v-3a6db0ba]{position:relative;z-index:0;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-wrap:nowrap;flex-wrap:nowrap;gap:12px;-ms-flex-align:end;align-items:flex-end;padding:24px 20px}.reason-layer[data-v-3a6db0ba]{width:100%;min-width:0;display:block;text-align:left;padding:0}.reason-item[data-v-3a6db0ba]{width:fit-content;display:inline-block;padding:8px;border-radius:4px;overflow:hidden;background-color:#00000008;cursor:pointer;transition:all .3s;text-align:center;vertical-align:middle;margin:0 6px 12px}.reason-item.selected[data-v-3a6db0ba]{color:#07c160;background-color:#07c1601a}.reason-item.disabled[data-v-3a6db0ba]{opacity:.5;cursor:not-allowed}.reason-item .reason-text[data-v-3a6db0ba]{font-size:14px;line-height:20px;display:inline-block;vertical-align:middle}*[data-v-3a6db0ba]{-webkit-tap-highlight-color:transparent;tap-highlight-color:transparent}@media (prefers-color-scheme: dark){.reason-item[data-v-3a6db0ba]{background-color:#ffffff08}}.reason-item-primary[data-v-3a6db0ba]{background-color:#07c1601a;color:var(--weui-BRAND)}.comment-modal .weui-msg[data-v-3a6db0ba]{padding-top:0}.comment-modal .weui-msg__title[data-v-3a6db0ba]{margin-bottom:0}.comment-modal .weui-msg__icon-area[data-v-3a6db0ba]{margin-top:16px;margin-bottom:24px}.comment-modal .opr-title[data-v-3a6db0ba]{text-align:left;margin-bottom:12px;font-size:14px;font-family:PingFang SC;font-weight:400;color:var(--Glyph-1, rgba(0, 0, 0, .55));margin-left:6px}@media (prefers-color-scheme: dark){.comment-modal .opr-title[data-v-3a6db0ba]{color:var(--Glyph-1, rgba(255, 255, 255, .5))}}.comment-modal .weui-loadmore[data-v-3a6db0ba]{margin-top:230px}.comment-modal .weui-half-screen-dialog[data-v-3a6db0ba]{padding:0 18px}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}}();function V(e,t,i,s,a,o,n,r){var l="function"==typeof e?e.options:e;return t&&(l.render=t,l.staticRenderFns=i,l._compiled=!0),l._scopeId="data-v-"+o,{exports:e,options:l}}const y=V(window.Vue.extend({name:"CommentComplaint",components:{BottomModalDefault:e},props:{commentId:{type:[String,Number],default:""},contentId:{type:[String,Number],default:""},replyId:{type:[String,Number],default:""},from:{type:String,default:""},url:{type:String,default:window.location.href},bottomModalComponent:{type:Object,default:()=>e}},data:()=>({loading:!1,submitting:!1,showTips:!1,submitted:!1,reason:-1,selectedReason:0,reasonList:[],toast:{show:!1,type:"loading",message:""}}),methods:{openOpTools(){var e;const t=window.appuin||(null==(e=window.cgiData)?void 0:e.biz);window.open("/publicpoc/waptool?action=getpage&h5tools=comment&commentId=".concat(this.commentId,"&contentId=").concat(this.contentId,"&replyId=").concat(this.replyId,"&url=").concat(encodeURIComponent(this.url),"&biz=").concat(t))},onHide(){this.$emit("hide")},showToast(e,t,i=1500){this.toast.type=e,this.toast.message=t,this.toast.show=!0,"loading"!==e&&setTimeout((()=>{this.hideToast()}),i)},hideToast(){this.toast.show=!1},async fetchReasons(){return new Promise(((e,t)=>{c({url:"/publicpoc/complain_type?action=get_complain_type_list",type:"GET",async:!0,success:t=>{var i;console.log(t);const s="string"==typeof t?JSON.parse(t):t;if(0===(null==(i=null==s?void 0:s.base_resp)?void 0:i.ret)){this.$emit("reportSuccess",{});const t="string"==typeof s.page_conf?JSON.parse(s.page_conf):s.page_conf;e(t.list)}else e([{name:"色情低俗",id:20012},{name:"垃圾营销",id:10001},{name:"辱骂攻击",id:90041},{name:"诱导点赞",id:90003},{name:"政治敏感",id:90103},{name:"违法违规",id:20008},{name:"涉未成年",id:200126},{name:"不实消息",id:91282},{name:"不友善引战",id:900411}])},error:t=>{console.error("Failed to fetch reasons:",t instanceof Error?t.message:"Unknown error"),e([{name:"色情低俗",id:20012},{name:"垃圾营销",id:10001},{name:"辱骂攻击",id:90041},{name:"诱导点赞",id:90003},{name:"政治敏感",id:90103},{name:"违法违规",id:20008},{name:"涉未成年",id:200126},{name:"不实消息",id:91282},{name:"不友善引战",id:900411}])}})}))},async setReasonId(e){this.reason=this.reason===e.id?-1:e.id},async closeComplaint(){this.reason=-1,this.submitted=!1,this.hide()},async submitComplaint(){const e={comment_id:this.commentId,content_id:this.contentId,reply_id:this.replyId,defendant_url:this.url,from:this.from};return this.reason>-1&&(e.complain_type=this.reason),new Promise(((t,i)=>{c({url:"/publicpoc/comment_complain?action=submit",data:e,type:"POST",async:!0,success:e=>{var i;console.log(e);const s="string"==typeof e?JSON.parse(e):e;switch(null==(i=null==s?void 0:s.base_resp)?void 0:i.ret){case 0:this.submitted=!0,d.setSum(326818,100,1),this.$emit("reportSuccess",{}),t(!0);break;case 1e3:this.hideAfterToast("error","评论已被删除"),t(!1);break;case 20003:this.hideAfterToast("success","已投诉，平台会尽快处理"),t(!1);break;case-3:d.setSum(326818,102,1),this.hideAfterToast("error","投诉失败"),t(!1);break;default:d.setSum(326818,101,1),this.hideAfterToast("error","投诉失败"),t(!1)}},error:e=>{console.error("Failed to fetch reasons:",e instanceof Error?e.message:"Unknown error"),i(e)}})}))},async checkTools(){this.showTips=!1,c({url:"/publicpoc/waptool?action=check",type:"GET",async:!0,success:e=>{var t;console.log("工具检查: ",e);const i="string"==typeof e?JSON.parse(e):e;0===(null==(t=null==i?void 0:i.base_resp)?void 0:t.ret)?(console.log("工具检查通过"),this.showTips=!0):console.log("工具检查不通过")}})},async show(){this.loading=!0,this.selectedReason=0;try{const e=this.$refs.modal;if(!e)return void console.error("BottomModal reference is undefined. Make sure the component is properly mounted.");e.show(),this.checkTools(),this.reasonList=await this.fetchReasons(),this.reasonList.length>0&&(this.loading=!1)}catch(e){console.error("Error showing modal:",e),this.hideAfterToast("error","网络错误，请稍后重试")}},hide(){try{const e=this.$refs.modal;e&&e.hide()}catch(e){console.error("Error hiding modal:",e)}},hideAfterToast(e,t,i=800){this.showToast(e,t),setTimeout((()=>{this.hide()}),i)}}}),(function(){var e=this,t=e._self._c;return e._self._setupProxy,e.bottomModalComponent?t(e.bottomModalComponent,{ref:"modal",tag:"component",attrs:{height:633,"close-btn-type":"fold","ext-class":"weui-half-screen-dialog_wrp comment-modal","hide-when-scroll-down":!0,"hide-when-sideslip":!0,headerType:"custom"},on:{hide:e.onHide}},[t("template",{slot:"header"},[t("div",{staticClass:"weui-half-screen-dialog__hd__side"},[t("button",{ref:"hdBtn",staticClass:"weui-btn_icon weui-wa-hotarea",on:{click:e.closeComplaint}},[e._v("关闭"),t("i",{staticClass:"weui-icon-filled-fold"})])]),t("div",{staticClass:"weui-half-screen-dialog__hd__main"}),t("div",{staticClass:"weui-half-screen-dialog__hd__side"},[e.showTips?t("button",{staticClass:"weui-btn_icon weui-wa-hotarea",on:{click:e.openOpTools}},[e._v("更多"),t("i",{staticClass:"weui-icon-more"})]):e._e()])]),e.loading?t("div",{staticClass:"weui-loadmore"},[t("i",{staticClass:"weui-loading"})]):e.submitted?t("div",{staticClass:"weui-msg"},[t("div",{staticClass:"weui-msg__icon-area"},[t("i",{staticClass:"weui-icon-success weui-icon_msg"})]),t("div",{staticClass:"weui-msg__text-area"},[t("h2",{staticClass:"weui-msg__title"},[e._v("投诉已提交")])]),t("div",{staticClass:"weui-msg__opr-area"},[t("p",{key:"333",staticClass:"opr-title",style:{visibility:"hidden"}},[e._v("请选择补充原因")]),t("div",{key:"222",staticClass:"reason-layer",style:{visibility:"hidden"}},e._l(e.reasonList,(function(i){return t("div",{key:i.id,class:["reason-item",{selected:e.reason===i.id}],on:{click:function(t){!e.submitting&&e.setReasonId(i)}}},[t("span",{staticClass:"reason-text"},[e._v(e._s(i.name))])])})),0)]),t("p",{staticClass:"weui-btn-area"},[t("a",{staticClass:"weui-btn weui-btn_default",on:{click:e.closeComplaint}},[e._v("我知道了")])])]):t("div",{staticClass:"weui-msg"},[t("div",{staticClass:"weui-msg__icon-area"},[t("i",{staticClass:"weui-icon-info-circle weui-icon_msg"})]),t("div",{staticClass:"weui-msg__text-area"},[t("h2",{staticClass:"weui-msg__title"},[e._v("确认提交投诉")])]),t("div",{staticClass:"weui-msg__opr-area"},[t("p",{staticClass:"opr-title"},[e._v("你可以补充投诉原因（选填）")]),t("div",{staticClass:"reason-layer"},e._l(e.reasonList,(function(i){return t("div",{key:i.id,class:["reason-item",{selected:e.reason===i.id}],on:{click:function(t){!e.submitting&&e.setReasonId(i)}}},[t("span",{staticClass:"reason-text"},[e._v(e._s(i.name))])])})),0)]),t("p",{staticClass:"weui-btn-area"},[t("a",{staticClass:"weui-btn weui-btn_primary",on:{click:e.submitComplaint}},[e._v("确定")])])]),e.toast.show?t("div",{staticClass:"weui-toast"},["loading"===e.toast.type?t("span",{staticClass:"weui-primary-loading weui-icon_toast"},[t("span",{staticClass:"weui-primary-loading__dot"})]):"success"===e.toast.type?t("i",{staticClass:"weui-icon-success-no-circle weui-icon_toast"}):"error"===e.toast.type?t("i",{staticClass:"weui-icon-warn weui-icon_toast"}):e._e(),t("p",{staticClass:"weui-toast__content"},[e._v(e._s(e.toast.message))])]):e._e()],2):t("bottom-modal-default",{ref:"modal",attrs:{height:633,"close-btn-type":"fold","ext-class":"weui-half-screen-dialog_wrp comment-modal",disabledNavShadow:!0,headerType:"custom"},on:{hide:e.onHide}},[t("template",{slot:"header"},[t("div",{staticClass:"weui-half-screen-dialog__hd__side"},[t("button",{ref:"hdBtn",staticClass:"weui-btn_icon weui-wa-hotarea",on:{click:e.closeComplaint}},[e._v("关闭"),t("i",{staticClass:"weui-icon-filled-fold"})])]),t("div",{staticClass:"weui-half-screen-dialog__hd__main"}),t("div",{staticClass:"weui-half-screen-dialog__hd__side"},[e.showTips?t("button",{staticClass:"weui-btn_icon weui-wa-hotarea",on:{click:e.openOpTools}},[e._v("更多"),t("i",{staticClass:"weui-icon-more"})]):e._e()])]),e.loading?t("div",{staticClass:"weui-loadmore"},[t("i",{staticClass:"weui-loading"})]):e._e(),e.loading?t("div",{staticClass:"weui-loadmore"},[t("i",{staticClass:"weui-loading"})]):e.submitted?t("div",{staticClass:"weui-msg"},[t("div",{staticClass:"weui-msg__icon-area"},[t("i",{staticClass:"weui-icon-success weui-icon_msg"})]),t("div",{staticClass:"weui-msg__text-area"},[t("h2",{staticClass:"weui-msg__title"},[e._v("投诉已提交")])]),t("div",{staticClass:"weui-msg__opr-area"},[t("p",{key:"333",staticClass:"opr-title",style:{visibility:"hidden"}},[e._v("请选择补充原因")]),t("div",{key:"222",staticClass:"reason-layer",style:{visibility:"hidden"}},e._l(e.reasonList,(function(i){return t("div",{key:i.id,class:["reason-item",{selected:e.reason===i.id}],on:{click:function(t){!e.submitting&&e.setReasonId(i)}}},[t("span",{staticClass:"reason-text"},[e._v(e._s(i.name))])])})),0)]),t("p",{staticClass:"weui-btn-area"},[t("a",{staticClass:"weui-btn weui-btn_default",on:{click:e.closeComplaint}},[e._v("我知道了")])])]):t("div",{staticClass:"weui-msg"},[t("div",{staticClass:"weui-msg__icon-area"},[t("i",{staticClass:"weui-icon-info-circle weui-icon_msg"})]),t("div",{staticClass:"weui-msg__text-area"},[t("h2",{staticClass:"weui-msg__title"},[e._v("确认提交投诉")])]),t("div",{staticClass:"weui-msg__opr-area"},[t("p",{staticClass:"opr-title"},[e._v("你可以补充投诉原因（选填）")]),t("div",{staticClass:"reason-layer"},e._l(e.reasonList,(function(i){return t("div",{key:i.id,class:["reason-item",{selected:e.reason===i.id}],on:{click:function(t){!e.submitting&&e.setReasonId(i)}}},[t("span",{staticClass:"reason-text"},[e._v(e._s(i.name))])])})),0)]),t("p",{staticClass:"weui-btn-area"},[t("a",{staticClass:"weui-btn weui-btn_primary",on:{click:e.submitComplaint}},[e._v("确定")])])]),e.toast.show?t("div",{staticClass:"weui-toast"},["loading"===e.toast.type?t("span",{staticClass:"weui-primary-loading weui-icon_toast"},[t("span",{staticClass:"weui-primary-loading__dot"})]):"success"===e.toast.type?t("i",{staticClass:"weui-icon-success-no-circle weui-icon_toast"}):"error"===e.toast.type?t("i",{staticClass:"weui-icon-warn weui-icon_toast"}):e._e(),t("p",{staticClass:"weui-toast__content"},[e._v(e._s(e.toast.message))])]):e._e()],2)}),[],0,0,"3a6db0ba").exports;!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".reason-wrapper[data-v-3a6db0ba]{position:relative;z-index:0;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-wrap:nowrap;flex-wrap:nowrap;gap:12px;-ms-flex-align:end;align-items:flex-end;padding:24px 20px}.reason-layer[data-v-3a6db0ba]{width:100%;min-width:0;display:block;text-align:left;padding:0}.reason-item[data-v-3a6db0ba]{width:fit-content;display:inline-block;padding:8px;border-radius:4px;overflow:hidden;background-color:#00000008;cursor:pointer;transition:all .3s;text-align:center;vertical-align:middle;margin:0 6px 12px}.reason-item.selected[data-v-3a6db0ba]{color:#07c160;background-color:#07c1601a}.reason-item.disabled[data-v-3a6db0ba]{opacity:.5;cursor:not-allowed}.reason-item .reason-text[data-v-3a6db0ba]{font-size:14px;line-height:20px;display:inline-block;vertical-align:middle}*[data-v-3a6db0ba]{-webkit-tap-highlight-color:transparent;tap-highlight-color:transparent}@media (prefers-color-scheme: dark){.reason-item[data-v-3a6db0ba]{background-color:#ffffff08}}.reason-item-primary[data-v-3a6db0ba]{background-color:#07c1601a;color:var(--weui-BRAND)}.comment-modal .weui-msg[data-v-3a6db0ba]{padding-top:0}.comment-modal .weui-msg__title[data-v-3a6db0ba]{margin-bottom:0}.comment-modal .weui-msg__icon-area[data-v-3a6db0ba]{margin-top:16px;margin-bottom:24px}.comment-modal .opr-title[data-v-3a6db0ba]{text-align:left;margin-bottom:12px;font-size:14px;font-family:PingFang SC;font-weight:400;color:var(--Glyph-1, rgba(0, 0, 0, .55));margin-left:6px}@media (prefers-color-scheme: dark){.comment-modal .opr-title[data-v-3a6db0ba]{color:var(--Glyph-1, rgba(255, 255, 255, .5))}}.comment-modal .weui-loadmore[data-v-3a6db0ba]{margin-top:230px}.comment-modal .weui-half-screen-dialog[data-v-3a6db0ba]{padding:0 18px}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}}();const S=u({components:{CommentComplaint:y,Teleport:t},data:()=>({BottomModal:e}),computed:{...i("mp-comment-complaint",["complainDialogShowStatus","complainCommentItem","complainCommentId","complainContentId","complainReplyId","complainFrom"])},watch:{async complainDialogShowStatus(e){e&&(await this.$nextTick(),this.$refs.complaint.show())}},methods:{...s("mp-comment-complaint",["hideComplainDialog","setComplainStatus"]),...s("mp-comment",["removeComment"]),reportSuccess(){switch(this.complainFrom){case"addedInfo":case"underline":this.setComplainStatus("success");break;default:this.removeComment({commentItem:this.complainCommentItem,replyId:this.complainReplyId})}},complainDialogHide(){this.hideComplainDialog()}}},(function(){var e=this,t=e._self._c;return t("Teleport",{attrs:{to:"body"}},[t("comment-complaint",{ref:"complaint",attrs:{"bottom-modal-component":e.BottomModal,"comment-id":e.complainCommentId,"content-id":e.complainContentId,"reply-id":e.complainReplyId,from:e.complainFrom},on:{reportSuccess:e.reportSuccess,hide:e.complainDialogHide}})],1)}),[],!1,null,null,null,null).exports;const L=u({name:"mp-slide-into",props:{scene:{type:Number,default:1},visible:{type:Boolean,default:!1}},components:{Intersect:a},data:()=>({maxPull:50,pullStartY:0,touchDelay:70,svgStyle:{paddingTop:"8px",opacity:.55,marginTop:"0px",marginBottom:"0px"},pullDistance:0,isPulling:!1,cancelMoveGap:10,touchStartTs:null,slideMinY:1/0,reachedBottom:!1,hasReachedMax:!1,hasTriggeredFeedback:!1}),computed:{...i(["cgiData","extRes"]),...i("mp-comment",["offset","commentData"]),...o("mp-comment",["commentEnabled"]),...i("mp-related-image",{relatedImgList:e=>e.list}),supportSlide(){var e;return!((null==(e=this.relatedImgList)?void 0:e.length)>0)}},mounted(){C.invoke("disableBounceScroll",{place:["top","bottom"]}),this.$watch("supportSlide",this.supportTouchWatcher,{immediate:!0})},beforeDestroy(){window.removeEventListener("touchstart",this.onSlideStart),window.removeEventListener("touchmove",this.onSlideMove),window.removeEventListener("touchend",this.onSlideEnd),window.removeEventListener("iframe-touch-event",this.handleIframeTouchEvent)},methods:{supportTouchWatcher(e,t){e!==t&&(e?(window.addEventListener("touchstart",this.onSlideStart),window.addEventListener("touchmove",this.onSlideMove),window.addEventListener("touchend",this.onSlideEnd),window.addEventListener("iframe-touch-event",this.handleIframeTouchEvent)):(window.removeEventListener("touchstart",this.onSlideStart),window.removeEventListener("touchmove",this.onSlideMove),window.removeEventListener("touchend",this.onSlideEnd),window.removeEventListener("iframe-touch-event",this.handleIframeTouchEvent)))},triggerHapticFeedback(){C.invoke("vibrateShort",{style:"medium"},(e=>{console.log("vibrateShort",e)}))},onSlideStart(e){this.visible&&(this.isPulling=!0,this.touchStartTs=Date.now(),this.pullStartY=e.touches[0].clientY,this.slideMinY=e.touches[0].clientY)},onSlideMove(e){if(!this.isPulling||!this.visible)return;e.preventDefault();const t=e.touches[0].clientY,i=this.pullStartY-t;this.slideMinY=Math.min(this.slideMinY,t);const{scrollTop:s,clientHeight:a,scrollHeight:o}=document.documentElement;if(this.reachedBottom=s+a>=o-5,this.reachedBottom||this.pullDistance){if(t>this.slideMinY+this.cancelMoveGap)return this.pullDistance=0,this.pullStartY=t,void this.updateSvgStyle();this.pullDistance=Math.max(0,i),this.updateSvgStyle(),this.pullDistance>=this.maxPull&&!this.hasTriggeredFeedback?(this.triggerHapticFeedback(),this.hasTriggeredFeedback=!0):this.pullDistance<this.maxPull&&(this.hasTriggeredFeedback=!1)}},onSlideEnd(){this.visible&&(this.hasReachedMax&&Date.now()-this.touchStartTs>this.touchDelay&&setTimeout((()=>this.$emit("active","slide")),200),this.pullDistance=0,this.isPulling=!1,this.hasTriggeredFeedback=!1,this.updateSvgStyle())},updateSvgStyle(){const e=.55,t=Math.min(1,this.pullDistance/this.maxPull);let i,s,a,o,n;if(t<=.5){i=s=4*(t/.5),a=1,o=1,n=e,this.hasReachedMax=!1}else{const r=(t-.5)/.5;i=s=4+4*r,a=1+20/114*r,o=1+3/17*r,n=e+.35*r,this.hasReachedMax=t>=1}this.hasReachedMax&&this.pullDistance>this.maxPull&&(i=s=8,a=134/114,o=20/17,n=.9),this.svgStyle={paddingTop:"8px",opacity:n,marginTop:"".concat(i,"px"),marginBottom:"".concat(s,"px"),transform:"scale(".concat(a,", ").concat(o,")")}},handleIframeTouchEvent(e){const t=e.detail,{eventName:i,data:s}=t,{clientY:a}=s,o={type:i,touches:[{clientY:a}],preventDefault:()=>{}};switch(i){case"touchstart":this.onSlideStart(o);break;case"touchmove":this.onSlideMove(o);break;case"touchend":this.onSlideEnd(o)}}}},(function(){var e=this,t=e._self._c;return t("Intersect",{attrs:{threshold:[1]},on:{"~enter":function(t){return e.$emit("exposed")}}},[t("div",{class:["bottom_bar_slide_into",{visible:e.visible}],on:{click:function(t){return e.$emit("active","click")}}},[1===e.scene?t("svg",{style:e.svgStyle,attrs:{width:"114",height:"17",fill:"none",viewBox:"0 0 114 17",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{d:"M10.1213 7.36877L8.50024 5.74768L8.50024 13.1666L7.50024 13.1666L7.50024 5.74768L5.87915 7.36877L5.17114 6.66174L7.76392 4.06897C7.89408 3.93881 8.10542 3.93884 8.2356 4.06897L10.8284 6.66174L10.1213 7.36877Z",fill:"black"}}),t("path",{attrs:{d:"M22.992 3.196H23.88V6.904H28.332V7.744H23.88V12.88H29.352V13.72H18.672V12.88H22.992V3.196ZM35.496 5.944V6.856H37.236V5.944H35.496ZM37.968 6.856H39.468V4.384H35.496V5.284H37.968V6.856ZM40.284 6.856H41.136V8.86H40.32V7.6H34.56V8.848H33.732V6.856H34.68V3.628H40.284V6.856ZM39.144 14.176H37.932L37.716 13.408L38.892 13.432C39.156 13.432 39.288 13.312 39.288 13.084V12.28H35.664V14.2H34.836V8.38H40.092V13.252C40.092 13.864 39.768 14.176 39.144 14.176ZM35.664 11.596H39.288V10.684H35.664V11.596ZM35.664 10H39.288V9.112H35.664V10ZM31.488 3.436C32.352 4.06 33.072 4.672 33.66 5.284L33.072 5.872C32.544 5.284 31.824 4.66 30.9 3.988L31.488 3.436ZM31.368 6.364C32.148 6.952 32.796 7.54 33.324 8.14L32.748 8.728C32.268 8.164 31.62 7.564 30.78 6.916L31.368 6.364ZM32.532 9.784L33.288 10.072C32.784 11.524 32.22 12.892 31.596 14.164L30.828 13.816C31.488 12.496 32.052 11.152 32.532 9.784ZM42.72 4.12H45.528V3.136H46.416V4.12H49.584V3.136H50.472V4.12H53.28V4.9H50.472V5.776H49.584V4.9H46.416V5.776H45.528V4.9H42.72V4.12ZM46.092 6.064L46.812 6.508C46.38 7.06 45.96 7.528 45.528 7.912C46.116 8.908 46.416 10.132 46.416 11.584C46.416 12.64 46.26 13.372 45.948 13.78C45.72 14.02 45.384 14.14 44.94 14.14C44.46 14.14 44.088 14.128 43.8 14.116L43.56 13.324C43.932 13.36 44.328 13.384 44.736 13.384C45.036 13.384 45.252 13.276 45.372 13.084C45.516 12.832 45.588 12.316 45.6 11.524C45.6 11.14 45.576 10.78 45.528 10.444C44.88 11.104 44.1 11.656 43.212 12.112L42.744 11.404C43.848 10.9 44.724 10.276 45.36 9.556C45.24 9.136 45.096 8.764 44.904 8.428C44.388 8.8 43.764 9.172 43.032 9.532L42.576 8.812C43.272 8.524 43.896 8.176 44.448 7.744C44.088 7.312 43.644 6.94 43.14 6.652L43.776 6.112C44.28 6.424 44.712 6.796 45.06 7.228C45.42 6.88 45.768 6.496 46.092 6.064ZM47.004 8.164H49.476C49.5 7.3 49.512 6.628 49.512 6.16H50.376C50.376 6.724 50.364 7.396 50.352 8.164H53.112V8.98H50.424C50.904 10.924 51.888 12.436 53.4 13.492L52.824 14.14C51.444 13.096 50.52 11.764 50.064 10.132C49.584 11.752 48.672 13.108 47.34 14.188L46.764 13.564C48.324 12.256 49.212 10.732 49.428 8.98H47.004V8.164ZM51.576 5.908C52.176 6.484 52.632 6.988 52.956 7.42L52.308 7.876C51.972 7.396 51.516 6.868 50.928 6.304L51.576 5.908ZM60.564 10.912V11.764C60.192 11.86 59.832 11.944 59.472 12.028V14.2H58.632V12.22C57.384 12.484 56.1 12.712 54.756 12.904L54.552 12.064C54.912 12.016 55.272 11.956 55.632 11.908V4.48H54.684V3.664H60.396V4.312H65.04V5.104C64.776 7.324 64.224 9.22 63.396 10.792C63.972 11.776 64.692 12.688 65.544 13.516L64.968 14.176C64.164 13.348 63.492 12.484 62.94 11.584C62.292 12.592 61.524 13.456 60.624 14.164L60.036 13.492C61.008 12.724 61.812 11.812 62.46 10.732C61.572 9.028 61.044 7.168 60.876 5.152H60.396V4.48H59.472V11.176C59.844 11.092 60.204 11.008 60.564 10.912ZM61.668 5.152C61.812 6.88 62.232 8.452 62.916 9.88C63.564 8.512 64.008 6.94 64.224 5.152H61.668ZM58.632 11.368V9.736H56.472V11.776C57.204 11.656 57.924 11.512 58.632 11.368ZM56.472 8.956H58.632V7.132H56.472V8.956ZM56.472 6.34H58.632V4.48H56.472V6.34ZM66.864 3.676H77.148V4.48H72.432V5.524H76.152V10.276H72.288C72.144 11.068 71.916 11.704 71.58 12.184C73.26 12.892 75.252 13.288 77.556 13.36L77.34 14.188C74.928 14.092 72.828 13.624 71.04 12.808C70.2 13.528 68.82 13.984 66.912 14.2L66.54 13.408C68.208 13.276 69.432 12.94 70.2 12.388C69.504 12.004 68.856 11.56 68.268 11.056L68.928 10.6C69.492 11.068 70.116 11.476 70.788 11.824C71.076 11.416 71.292 10.9 71.412 10.276H67.896V5.524H71.568V4.48H66.864V3.676ZM75.3 9.52V8.248H72.432V8.668L72.396 9.52H75.3ZM71.532 9.52C71.556 9.244 71.568 8.956 71.568 8.668V8.248H68.748V9.52H71.532ZM68.748 7.528H71.568V6.268H68.748V7.528ZM72.432 6.268V7.528H75.3V6.268H72.432ZM83.952 3.16L84.72 3.568C84.504 3.808 84.276 4.036 84.036 4.252H87.48V4.936C86.184 7.24 83.772 8.536 80.268 8.812L79.896 8.032C80.976 7.96 81.936 7.804 82.8 7.552C82.428 7.096 82.032 6.676 81.624 6.304L82.38 5.944C82.812 6.352 83.22 6.784 83.604 7.264C84.852 6.76 85.824 6.004 86.496 5.02H82.992C82.056 5.572 80.952 5.992 79.668 6.28L79.164 5.488C81.3 5.08 82.896 4.312 83.952 3.16ZM83.496 10.66C83.952 11.128 84.396 11.632 84.804 12.172C86.136 11.596 87.18 10.768 87.948 9.712H84.396C83.34 10.216 82.092 10.6 80.64 10.852L80.124 10.084C82.74 9.82 84.672 9.016 85.92 7.696L86.664 8.104C86.376 8.392 86.076 8.668 85.74 8.92H89.028V9.604C87.324 12.436 84.156 13.9 79.5 14.008L79.152 13.18C81.024 13.168 82.644 12.94 84 12.484C83.592 11.944 83.172 11.452 82.728 11.02L83.496 10.66ZM94.824 5.032H96.96V3.22H97.8V5.032H100.356V8.656H101.292V9.496H98.016C98.76 11.128 99.948 12.448 101.568 13.456L100.98 14.128C99.348 13.012 98.148 11.608 97.392 9.904C96.852 11.824 95.784 13.228 94.188 14.14L93.66 13.432C95.196 12.616 96.204 11.308 96.66 9.496H94.332V8.656H96.828C96.912 8.104 96.96 7.504 96.96 6.88V5.836H94.824V5.032ZM97.8 5.836V6.7C97.8 7.396 97.752 8.044 97.656 8.656H99.516V5.836H97.8ZM90.912 5.512L91.596 5.56C91.56 6.76 91.416 7.912 91.164 8.992L90.456 8.788C90.72 7.756 90.876 6.664 90.912 5.512ZM93.936 5.248C94.272 6.016 94.56 6.892 94.824 7.888L94.116 8.056C93.9 7.156 93.624 6.292 93.288 5.452L93.936 5.248ZM92.196 3.232H93.048V14.152H92.196V3.232ZM106.08 7.9H107.88V4.612H106.284V3.772H111.78V7.456C111.78 9.856 111.96 11.524 112.332 12.484C112.488 12.868 112.632 13.072 112.764 13.072C112.812 13.072 112.848 12.916 112.896 12.616C112.92 12.28 112.944 11.788 112.968 11.128L113.652 11.452C113.604 12.604 113.508 13.348 113.364 13.672C113.244 13.912 113.112 14.044 112.956 14.044C112.512 14.044 112.128 13.768 111.792 13.216C111.216 12.208 110.928 10.288 110.928 7.456V4.612H108.72V7.9H110.364V8.728H108.72V14.212H107.88V8.728H106.08V7.9ZM103.884 3.316C104.676 3.928 105.336 4.54 105.864 5.164L105.276 5.764C104.784 5.176 104.124 4.552 103.284 3.904L103.884 3.316ZM102.516 6.868H105.024V12.172C105.408 11.836 105.816 11.452 106.26 11.008L106.488 11.92C105.792 12.616 105.048 13.228 104.256 13.768L103.92 13C104.088 12.832 104.184 12.652 104.184 12.448V7.696H102.516V6.868Z",fill:"black"}})]):2===e.scene?t("svg",{style:e.svgStyle,attrs:{width:"138",height:"17",fill:"none",viewBox:"0 0 138 17",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{d:"M10.1213 7.36877L8.50024 5.74768L8.50024 13.1666L7.50024 13.1666L7.50024 5.74768L5.87915 7.36877L5.17114 6.66174L7.76392 4.06897C7.89408 3.93881 8.10542 3.93884 8.2356 4.06897L10.8284 6.66174L10.1213 7.36877Z",fill:"black"}}),t("path",{attrs:{d:"M22.992 3.196H23.88V6.904H28.332V7.744H23.88V12.88H29.352V13.72H18.672V12.88H22.992V3.196ZM35.496 5.944V6.856H37.236V5.944H35.496ZM37.968 6.856H39.468V4.384H35.496V5.284H37.968V6.856ZM40.284 6.856H41.136V8.86H40.32V7.6H34.56V8.848H33.732V6.856H34.68V3.628H40.284V6.856ZM39.144 14.176H37.932L37.716 13.408L38.892 13.432C39.156 13.432 39.288 13.312 39.288 13.084V12.28H35.664V14.2H34.836V8.38H40.092V13.252C40.092 13.864 39.768 14.176 39.144 14.176ZM35.664 11.596H39.288V10.684H35.664V11.596ZM35.664 10H39.288V9.112H35.664V10ZM31.488 3.436C32.352 4.06 33.072 4.672 33.66 5.284L33.072 5.872C32.544 5.284 31.824 4.66 30.9 3.988L31.488 3.436ZM31.368 6.364C32.148 6.952 32.796 7.54 33.324 8.14L32.748 8.728C32.268 8.164 31.62 7.564 30.78 6.916L31.368 6.364ZM32.532 9.784L33.288 10.072C32.784 11.524 32.22 12.892 31.596 14.164L30.828 13.816C31.488 12.496 32.052 11.152 32.532 9.784ZM42.72 4.12H45.528V3.136H46.416V4.12H49.584V3.136H50.472V4.12H53.28V4.9H50.472V5.776H49.584V4.9H46.416V5.776H45.528V4.9H42.72V4.12ZM46.092 6.064L46.812 6.508C46.38 7.06 45.96 7.528 45.528 7.912C46.116 8.908 46.416 10.132 46.416 11.584C46.416 12.64 46.26 13.372 45.948 13.78C45.72 14.02 45.384 14.14 44.94 14.14C44.46 14.14 44.088 14.128 43.8 14.116L43.56 13.324C43.932 13.36 44.328 13.384 44.736 13.384C45.036 13.384 45.252 13.276 45.372 13.084C45.516 12.832 45.588 12.316 45.6 11.524C45.6 11.14 45.576 10.78 45.528 10.444C44.88 11.104 44.1 11.656 43.212 12.112L42.744 11.404C43.848 10.9 44.724 10.276 45.36 9.556C45.24 9.136 45.096 8.764 44.904 8.428C44.388 8.8 43.764 9.172 43.032 9.532L42.576 8.812C43.272 8.524 43.896 8.176 44.448 7.744C44.088 7.312 43.644 6.94 43.14 6.652L43.776 6.112C44.28 6.424 44.712 6.796 45.06 7.228C45.42 6.88 45.768 6.496 46.092 6.064ZM47.004 8.164H49.476C49.5 7.3 49.512 6.628 49.512 6.16H50.376C50.376 6.724 50.364 7.396 50.352 8.164H53.112V8.98H50.424C50.904 10.924 51.888 12.436 53.4 13.492L52.824 14.14C51.444 13.096 50.52 11.764 50.064 10.132C49.584 11.752 48.672 13.108 47.34 14.188L46.764 13.564C48.324 12.256 49.212 10.732 49.428 8.98H47.004V8.164ZM51.576 5.908C52.176 6.484 52.632 6.988 52.956 7.42L52.308 7.876C51.972 7.396 51.516 6.868 50.928 6.304L51.576 5.908ZM60.564 10.912V11.764C60.192 11.86 59.832 11.944 59.472 12.028V14.2H58.632V12.22C57.384 12.484 56.1 12.712 54.756 12.904L54.552 12.064C54.912 12.016 55.272 11.956 55.632 11.908V4.48H54.684V3.664H60.396V4.312H65.04V5.104C64.776 7.324 64.224 9.22 63.396 10.792C63.972 11.776 64.692 12.688 65.544 13.516L64.968 14.176C64.164 13.348 63.492 12.484 62.94 11.584C62.292 12.592 61.524 13.456 60.624 14.164L60.036 13.492C61.008 12.724 61.812 11.812 62.46 10.732C61.572 9.028 61.044 7.168 60.876 5.152H60.396V4.48H59.472V11.176C59.844 11.092 60.204 11.008 60.564 10.912ZM61.668 5.152C61.812 6.88 62.232 8.452 62.916 9.88C63.564 8.512 64.008 6.94 64.224 5.152H61.668ZM58.632 11.368V9.736H56.472V11.776C57.204 11.656 57.924 11.512 58.632 11.368ZM56.472 8.956H58.632V7.132H56.472V8.956ZM56.472 6.34H58.632V4.48H56.472V6.34ZM66.864 3.676H77.148V4.48H72.432V5.524H76.152V10.276H72.288C72.144 11.068 71.916 11.704 71.58 12.184C73.26 12.892 75.252 13.288 77.556 13.36L77.34 14.188C74.928 14.092 72.828 13.624 71.04 12.808C70.2 13.528 68.82 13.984 66.912 14.2L66.54 13.408C68.208 13.276 69.432 12.94 70.2 12.388C69.504 12.004 68.856 11.56 68.268 11.056L68.928 10.6C69.492 11.068 70.116 11.476 70.788 11.824C71.076 11.416 71.292 10.9 71.412 10.276H67.896V5.524H71.568V4.48H66.864V3.676ZM75.3 9.52V8.248H72.432V8.668L72.396 9.52H75.3ZM71.532 9.52C71.556 9.244 71.568 8.956 71.568 8.668V8.248H68.748V9.52H71.532ZM68.748 7.528H71.568V6.268H68.748V7.528ZM72.432 6.268V7.528H75.3V6.268H72.432ZM83.952 3.16L84.72 3.568C84.504 3.808 84.276 4.036 84.036 4.252H87.48V4.936C86.184 7.24 83.772 8.536 80.268 8.812L79.896 8.032C80.976 7.96 81.936 7.804 82.8 7.552C82.428 7.096 82.032 6.676 81.624 6.304L82.38 5.944C82.812 6.352 83.22 6.784 83.604 7.264C84.852 6.76 85.824 6.004 86.496 5.02H82.992C82.056 5.572 80.952 5.992 79.668 6.28L79.164 5.488C81.3 5.08 82.896 4.312 83.952 3.16ZM83.496 10.66C83.952 11.128 84.396 11.632 84.804 12.172C86.136 11.596 87.18 10.768 87.948 9.712H84.396C83.34 10.216 82.092 10.6 80.64 10.852L80.124 10.084C82.74 9.82 84.672 9.016 85.92 7.696L86.664 8.104C86.376 8.392 86.076 8.668 85.74 8.92H89.028V9.604C87.324 12.436 84.156 13.9 79.5 14.008L79.152 13.18C81.024 13.168 82.644 12.94 84 12.484C83.592 11.944 83.172 11.452 82.728 11.02L83.496 10.66ZM93.768 9.784H98.22V12.736H93.768V9.784ZM97.392 11.968V10.564H94.596V11.968H97.392ZM97.164 7.444C98.148 8.14 98.976 8.824 99.648 9.508L99 10.144C98.412 9.472 97.608 8.752 96.576 7.996L97.164 7.444ZM96.072 3.076C96.216 3.412 96.36 3.772 96.492 4.18H101.316V5.02H98.724C98.508 5.56 98.268 6.04 98.028 6.472H100.692V12.952C100.692 13.744 100.332 14.14 99.636 14.14H98.412L98.196 13.348L99.36 13.384C99.696 13.384 99.864 13.168 99.864 12.76V7.24H92.112V14.116H91.284V6.472H93.816C93.636 5.956 93.42 5.476 93.18 5.02H90.684V4.18H95.568C95.424 3.832 95.28 3.52 95.124 3.232L96.072 3.076ZM94.716 6.472H97.092C97.344 5.992 97.572 5.512 97.776 5.02H94.14C94.344 5.452 94.536 5.944 94.716 6.472ZM94.752 7.456L95.364 7.996C94.68 8.824 93.828 9.544 92.82 10.156L92.268 9.436C93.252 8.884 94.08 8.224 94.752 7.456ZM104.688 3.7H111.3V7.624H104.688V3.7ZM110.436 6.808V4.516H105.552V6.808H110.436ZM107.316 8.812V14.02H106.476V13.408H103.944V14.02H103.092V8.812H107.316ZM103.944 12.592H106.476V9.64H103.944V12.592ZM112.896 8.812V14.02H112.032V13.408H109.404V14.02H108.552V8.812H112.896ZM109.404 12.592H112.032V9.64H109.404V12.592ZM115.416 3.448C116.136 3.676 116.808 3.952 117.408 4.288L116.952 4.984C116.304 4.6 115.656 4.312 114.996 4.096L115.416 3.448ZM119.28 3.16L120.132 3.268C120.036 3.532 119.94 3.796 119.82 4.036H124.656V4.552C124.512 5.14 124.32 5.728 124.08 6.304L123.252 6.052C123.456 5.68 123.624 5.26 123.768 4.792H121.728C121.68 5.08 121.608 5.344 121.512 5.584C122.136 6.508 123.372 7.144 125.22 7.492L124.908 8.26C123.156 7.9 121.908 7.252 121.164 6.292C121.02 6.508 120.864 6.712 120.684 6.904C120.096 7.456 119.136 7.9 117.792 8.212L117.468 7.444C118.644 7.192 119.496 6.844 120.024 6.388C120.456 5.992 120.756 5.464 120.9 4.792H119.364C119.028 5.224 118.632 5.62 118.176 5.98L117.672 5.308C118.464 4.732 118.992 4.012 119.28 3.16ZM123.84 8.536V12.1H122.976V9.34H116.988V12.196H116.124V8.536H123.84ZM119.64 9.796L120.504 9.868C120.336 11.392 119.976 12.412 119.412 12.94C118.788 13.588 117.396 14.008 115.236 14.176L114.9 13.408C116.808 13.3 118.068 12.976 118.68 12.424C119.22 11.908 119.544 11.032 119.64 9.796ZM117.084 5.704L117.588 6.292C116.988 6.916 116.244 7.504 115.356 8.056L114.78 7.384C115.692 6.868 116.46 6.304 117.084 5.704ZM120.78 12.064C122.34 12.472 123.756 12.964 125.04 13.54L124.572 14.26C123.204 13.612 121.788 13.096 120.336 12.724L120.78 12.064ZM130.08 7.9H131.88V4.612H130.284V3.772H135.78V7.456C135.78 9.856 135.96 11.524 136.332 12.484C136.488 12.868 136.632 13.072 136.764 13.072C136.812 13.072 136.848 12.916 136.896 12.616C136.92 12.28 136.944 11.788 136.968 11.128L137.652 11.452C137.604 12.604 137.508 13.348 137.364 13.672C137.244 13.912 137.112 14.044 136.956 14.044C136.512 14.044 136.128 13.768 135.792 13.216C135.216 12.208 134.928 10.288 134.928 7.456V4.612H132.72V7.9H134.364V8.728H132.72V14.212H131.88V8.728H130.08V7.9ZM127.884 3.316C128.676 3.928 129.336 4.54 129.864 5.164L129.276 5.764C128.784 5.176 128.124 4.552 127.284 3.904L127.884 3.316ZM126.516 6.868H129.024V12.172C129.408 11.836 129.816 11.452 130.26 11.008L130.488 11.92C129.792 12.616 129.048 13.228 128.256 13.768L127.92 13C128.088 12.832 128.184 12.652 128.184 12.448V7.696H126.516V6.868Z",fill:"black"}})]):e._e()])])}),[],!1,null,null,null,null).exports,x=new Map([["slide","10002"],["click","10003"]]),k=_.isNewMpApp?"mp-app-comment":"mp-comment";const M=u({components:{[L.name]:L,[n.name]:n,[r.name]:r},inject:["shareCustomContent"],props:{scene:{type:String,default:""},notHideWhenCmtInput:{type:Boolean,default:!1}},data:()=>({commentInited:!1,inComment:!1,nickNameWrapped:!1,isPc:w.os.pc,cmtInputValue:"",showBottomBar:!!window.is_login,isSelecting:!1,profileShow:!1,hasRemovePlaceHolder:!1,contentObserver:null,shouldShowSlideInto:!1}),computed:{...o("mp-stream",["hasInteractData","streamFriendsShow"]),...i(["cgiData","extRes","urlParams"]),...i("mp-comment",["hasCommentShowed","commentStatus","bottomCommentVm"]),...i("mp-stream",["commentInputStatus","articleFoldStatus","borderOpacity"]),...i("mp-pay-read",["payReadBottomVisible"]),...i({statStyle:e=>{var t;return 3===(null==(t=e.extRes.appmsgstat)?void 0:t.style)?1:0},isPay:e=>e.cgiData.isPaySubscribe||e.cgiData.isPayTopic,bottomBarCommentEntry:(e,t)=>t["".concat(k,"/bottomBarCommentEntry")]}),barAsyncReady(){return this.hasInteractData&&this.profileShow},canShowBar(){return!(this.articleFoldStatus||this.commentInputStatus&&!this.notHideWhenCmtInput||!this.barAsyncReady||!this.hasRemovePlaceHolder)||!!b&&(this.removePlaceHolder(),!0)},showHotNewsSlideInto(){return!this.isPc&&this.cgiData.appmsg_bar_data.is_show_newsflash_feeds},hotNewsFeedUrl(){return decodeURIComponent(this.cgiData.appmsg_bar_data.newsflash_feeds_url).htmlDecode()},showProductSlideInto(){return!this.isPc&&1*this.cgiData.source==323&&!!this.cgiData.appmsg_bar_data.ecs_jump_info_str},ecsJumpInfo(){return this.cgiData.appmsg_bar_data.ecs_jump_info_str},isThankLike(){var e;return 1*(null==(e=this.urlParams)?void 0:e.is_thank_like)==1},isThankLove(){var e;return 1*(null==(e=this.urlParams)?void 0:e.is_thank_love)==1},isThankRedflower(){var e;return 1*(null==(e=this.urlParams)?void 0:e.is_thank_redflower)==1}},watch:{hasCommentShowed(e){e&&!this.commentInited&&(this.commentInited=!0,this.$nextTick((()=>{m.bindDebounceScrollEvent(this.judgeScroll,window,void 0,!0),g.on(window,"resize",m.debounce(this.judgeScroll,50)),this.judgeScroll()})))},streamFriendsShow(e){const t=document.querySelector(".rich_media");t&&(this.showHotNewsSlideInto||this.showProductSlideInto)&&(t.style.paddingBottom=e?"70px":"")}},created(){const e=this.$watch((()=>this.barAsyncReady),(async()=>{var t,i;await Promise.race([new Promise((e=>setTimeout(e,500))),(null==(i=null==(t=this.$refs)?void 0:t.interactionBar)?void 0:i.mergeTempBarStatus())||Promise.resolve()]),this.removePlaceHolder(),e()})),t=this.$watch((()=>this.extRes&&this.extRes.base_resp&&0!==this.extRes.base_resp.ret),(e=>{e&&this.removePlaceHolder(),t()}));if(this.showHotNewsSlideInto){C.invoke("onWebPageUrlExposed",{bizType:0,urlList:[{url:this.hotNewsFeedUrl,extInfo:{itemshowType:0,preloadType:0}}]},(e=>{console.log("preload hotnewsfeed res: ".concat(e.err_msg," (").concat(this.hotNewsFeedUrl,")"))}));for(const e of x.values()){const t=h.addParam(this.hotNewsFeedUrl,"scene",e,!0);C.invoke("onWebPageUrlExposed",{bizType:0,urlList:[{url:t,extInfo:{itemshowType:0,preloadType:0}}]},(e=>{console.log("preload hotnewsfeed res: ".concat(e.err_msg," (").concat(t,")"))}))}}},mounted(){var e;this.isPc||(document.addEventListener("selectionchange",this.onSelectionChange),window.addEventListener("touchmove",this.onTouchMove),window.addEventListener("touchend",this.onTouchEnd)),window.__click_temp_btm_bar_cb__=({type:e,val:t,sucCb:i,failCb:s})=>{var a,o,n,r,l,c,d;try{"praise"===e?null==(a=this.$refs.interactionBar)||a.tempBarPraise({val:t,sucCb:i,failCb:s}):"share"===e?null==(o=this.$refs.interactionBar)||o.tempBarShare({val:t,sucCb:i,failCb:s}):"recommend"===e?null==(n=this.$refs.interactionBar)||n.tempBarRecommend({val:t,sucCb:i,failCb:s}):"comment"===e?null==(r=this.$refs.interactionBar)||r.tempBarComment({val:t,sucCb:i,failCb:s}):"subscribe"===e?null==(l=this.$refs.likeProfile)||l.tempBarSubscribe({val:t,sucCb:i,failCb:s}):"author_praise"===e?null==(c=this.$refs.interactionBar)||c.tempBarAuthorPraise({val:t,sucCb:i,failCb:s}):"author_recommend"===e&&(null==(d=this.$refs.interactionBar)||d.tempBarAuthorRecommend({val:t,sucCb:i,failCb:s}))}catch(m){console.error("__click_temp_btm_bar_cb__",m)}},null==(e=window.__wait_click_temp_btm_bar_cb__)||e.forEach((e=>e())),setTimeout((()=>{this.urlParams&&(this.$set(this.urlParams,"is_thank_like",0),this.$set(this.urlParams,"is_thank_love",0),this.$set(this.urlParams,"is_thank_redflower",0));const e=document.getElementById("js_thanks_b2c_placeholder");e&&(e.style.display="none")}),4500)},beforeDestroy(){this.isPc||(document.removeEventListener("selectionchange",this.onSelectionChange),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)),this.contentObserver&&(this.contentObserver.disconnect(),this.contentObserver=null)},methods:{updateProfileShow(e){this.profileShow=e},onSelectionChange(){this.isSelecting?this.__selectTimer&&clearTimeout(this.__selectTimer):(this.addBarSelectStatus(),this.isSelecting=!0),this.__selectTimer=setTimeout((()=>{this.removeBarSelectStatus(),this.isSelecting=!1}),500)},onTouchMove(){this.isSelecting||(this.addBarSelectStatus(),this.isSelecting=!0)},async onTouchEnd(){this.isSelecting&&(await new Promise((e=>setTimeout(e,100))),this.removeBarSelectStatus(),this.isSelecting=!1)},addBarSelectStatus(){const e=document.getElementById("js_article_bottom_bar"),t=document.getElementById("js_bottom_bar_padding_mask");e&&!e.classList.contains("select_mode")&&e.classList.add("select_mode"),t&&!t.classList.contains("select_mode")&&t.classList.add("select_mode")},removeBarSelectStatus(){const e=document.getElementById("js_article_bottom_bar"),t=document.getElementById("js_bottom_bar_padding_mask");e&&e.classList.contains("select_mode")&&e.classList.remove("select_mode"),t&&t.classList.contains("select_mode")&&t.classList.remove("select_mode")},async removePlaceHolder(){if(this.hasRemovePlaceHolder)return;this.hasRemovePlaceHolder=!0,await this.$nextTick();const e=document.getElementById("js_bottom_bar_placeholder");if(e&&(e.style.display="none"),!this.isPc&&(this.showHotNewsSlideInto||this.showProductSlideInto)){document.documentElement.scrollHeight>window.innerHeight?document.body.classList.add("bottom_bar_sticky"):document.body.classList.remove("bottom_bar_sticky"),this.$nextTick((()=>{const e=document.querySelector("#js_content_end");e&&(this.contentObserver=new IntersectionObserver((e=>{if(e&&e.length>0){e[0].intersectionRatio>0&&(this.shouldShowSlideInto=!0,this.contentObserver&&(this.contentObserver.disconnect(),this.contentObserver=null))}}),{threshold:[1]}),this.contentObserver.observe(e))}))}},onNickWrap(e){this.nickNameWrapped=e},judgeScroll(){var e;if(!this._hasClickComment&&!this._hasClickBack){const t=null==(e=this.bottomCommentVm)?void 0:e.$refs.cmtContainer;this.inComment=function(e){const t=m.getScrollTop();if(e&&t>=0){const t=m.getInnerHeight(),i=m.getElementTop(e);return 0!==i&&i-t<-120}return!1}(t)}},setCustomShareInfo(){var e,t,i,s;null==(e=v)||e.handleAction("kShare");let a="";switch(1*window.item_show_type){case 7:a="分享音频",window.customShareInfo={img_url:this.cgiData.round_head_img,img_width:640,img_height:640,desc:a,timeline_desc:a,weiboApp_desc:this.cgiData.title};break;case 8:{const e=document.getElementById("js_image_desc");a=e?e.textContent:"分享图片";const o=this.cgiData.title||"".concat(this.cgiData.nick_name,"的图片分享"),n=window.picture_page_info_list&&window.picture_page_info_list[0],r=(null==(i=null==(t=window.picture_page_info_list)?void 0:t[0])?void 0:i.cdn_url)||"";window.customShareInfo={img_url:this.cgiData.cdn_1_1_img||r,img_width:640,img_height:640,desc:a,timeline_desc:a,weiboApp_desc:o||a,title:o,itemShowType:8,coverPicImageUrl:(null==n?void 0:n.cdn_url)||"",coverPicWidth:Math.round(+(null==n?void 0:n.width)||0),coverPicHeight:Math.round(+(null==n?void 0:n.height)||0),picCount:(null==(s=window.picture_page_info_list)?void 0:s.length)||0};break}case 10:a=this.cgiData.title,window.customShareInfo={img_url:this.cgiData.hd_head_img,img_width:640,img_height:640,desc:a,timeline_desc:a,weiboApp_desc:a,title:"".concat(this.cgiData.nick_name,"的文字分享")}}},onShare(){this.setCustomShareInfo(),this.shareCustomContent&&this.shareCustomContent()},handleHotNewsFeedExposure(){d.setSum(530135,0,1)},openHotNewsFeed(e){const t=x.has(e)?h.addParam(this.hotNewsFeedUrl,"scene",x.get(e),!0):this.hotNewsFeedUrl;"click"===e?d.setSum(530135,1,1):"slide"===e&&d.setSum(530135,2,1),f(t,"","",0,(e=>{console.log("open hotnewsfeed res: ".concat(e.err_msg," (").concat(t,")"))}),!0)},handleProductExposure(){d.setSum(530135,3,1),this.reportProductBehavior(1)},openProductPage(e){this.reportProductBehavior(2),"click"===e?d.setSum(530135,4,1):"slide"===e&&d.setSum(530135,5,1),C.invoke("handleEcsAction",{action:"checkAction",params:{method:"isActionAvailable",actionName:"openEcs",actionVersion:"1"}},(e=>{const{result:t}=e||{};t?C.invoke("handleEcsAction",{action:"openEcs",ecsJumpInfoBase64:this.ecsJumpInfo}):C.invoke("confirmDialog",{title:"请更新至微信最新版本再打开",confirmText:"去更新",cancelText:"取消"},(e=>{if(-1!==e.err_msg.indexOf(":ok")){const e="https://itunes.apple.com/cn/app/id414478124?mt=8&ls=1",t="https://support.weixin.qq.com/update/";location.href=_.isIOS?e:t}else-1!==e.err_msg.indexOf("system:")&&setTimeout((()=>{window.weui&&window.weui.alert("请更新至微信最新版本再打开")}),0)}))}))},reportProductBehavior(e){p.report(34285,{Element:"21",Bizuin:window.biz&&1*window.atob(window.biz)||0,Msgid:+window.mid,Itemidx:+window.idx,ActionType:1*e,client_report_scene:4,Pageregion:"recommend",ElementType:"more_button",ActionTimeStamp:Date.now(),Pagename:"content_detail_page",ExInfo1:JSON.stringify({content_type:0==+this.cgiData.item_show_type?"card_article":"card_pic"})})}}},(function(){var e=this,t=e._self._c;return t("div",{ref:"bottombar",staticClass:"bottom_bar_interaction_wrp",class:{hide_bottom_bar:!e.canShowBar,has_friends_list:e.streamFriendsShow}},[t("div",{staticClass:"bottom_bar_interaction_border",class:{bottom_bar_pay:e.isPay&&e.payReadBottomVisible,bottom_bar_friends:e.streamFriendsShow},style:{opacity:e.borderOpacity}}),t("div",{staticClass:"bottom_bar_interaction",attrs:{id:"content_bottom_interaction"}},[t("div",{staticClass:"bottom_bar_profile_interaction"},[e.bottomBarCommentEntry?e._e():t("mp-like-profile",{ref:"likeProfile",attrs:{"stat-style":2,"show-bottom-bar":e.showBottomBar,"is-thank-like":e.isThankLike,"is-thank-love":e.isThankLove,"is-thank-redflower":e.isThankRedflower},on:{nickwrap:e.onNickWrap,showChange:e.updateProfileShow}}),t("mp-stream-interaction-bar",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],ref:"interactionBar",attrs:{from:1,scene:e.scene,"in-comment":e.inComment,"nickname-wrapped":e.nickNameWrapped},on:{share:e.onShare}})],1),e.showHotNewsSlideInto?t("mp-slide-into",{attrs:{scene:1,visible:e.shouldShowSlideInto},on:{exposed:e.handleHotNewsFeedExposure,active:e.openHotNewsFeed}}):e.showProductSlideInto?t("mp-slide-into",{attrs:{scene:2,visible:e.shouldShowSlideInto},on:{exposed:e.handleProductExposure,active:e.openProductPage}}):e._e()],1)])}),[],!1,null,null,null,null).exports,T=window.Vue,I="__bottom_bar_safe_bottom__";function Z(e,t,i=!0){if(-1===location.search.indexOf("underline_heat_map=1")){if(e.state["mp-stream"]||e.registerModule(l.name,l),i&&new T({store:e,provide:{shareCustomContent:t},render:e=>e(M)}).$mount("#article_bottom_bar_area"),b){const e=document.getElementById("unlogin_bottom_bar");e&&(e.style.display="block")}setTimeout((()=>{if(console.log("bottombar-safe-bottom",H.bottom),H.bottom>30)try{w.os.ios?(document.documentElement.style.setProperty("--immersive-safe-bottom","".concat(H.bottom,"px")),localStorage.setItem(I,"".concat(H.bottom,"px"))):localStorage.removeItem(I)}catch(e){console.log(e)}}),300)}}export{M as A,S as c,Z as i};
