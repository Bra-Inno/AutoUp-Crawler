import{m as e,a as t,u as n,c as o}from"./comm_utils.mg5xph6v4fda8a3d.js";import{m as i,A as s,a as r,s as a,b as c,D as d}from"./private_share.mg5xph6v1a0c9c7e.js";import{i as l}from"./i18n.mg5xph6vde033f12.js";const u={postMessageEvt:{}};function p(e){let t=e.type;/^mpvideo_/.test(t)||(t="mpvideo_"+t);const n={data:e.data,type:t};window.postMessage(n,document.location.protocol+"//mp.weixin.qq.com")}const w={broadcastMessage:function(e){let t=e.type;/^broadcast_/.test(t)||(t="broadcast_"+t),p({type:t,data:e.data})},postMessage:p,addListener:function(e){let{type:t}=e;const{vid:n}=e;/^mpvideo_/.test(t)&&(t=t.replace(/^mpvideo_/,"")),n||console.error("error not found vid"),u.postMessageEvt[n]||(u.postMessageEvt[n]={}),u.postMessageEvt[n][t]||(u.postMessageEvt[n][t]=[]),u.postMessageEvt[n][t].push({func:e.func})},removeListener:function(e){let{type:t}=e;const{vid:n}=e;if(!n)return;let o;/^mpvideo_/.test(t)&&(t=t.replace(/^mpvideo_/,"")),o=u.postMessageEvt[n]&&u.postMessageEvt[n][t]&&u.postMessageEvt[n][t]||[];for(let i=0;i<o.length;i++)o[i].func===e.func&&(o.splice(i,1),i--)},triggerListener:function e(t){const{vid:n,type:o,data:i}=t;n?u.postMessageEvt[n]&&u.postMessageEvt[n][o]&&u.postMessageEvt[n][o].forEach((({func:e})=>e(i||{}))):Object.keys(u.postMessageEvt).forEach((n=>{e({...t,vid:n})}))}},m={videoInfo:{},videoCbs:{}};function h(e){e=e||{};const t=document.getElementsByClassName("video_iframe"),n=[];for(let o=0,i=t.length;o<i;o++){const i=t[o],s=i.getAttribute("vid");void 0!==e.vid&&s!==e.vid||n.push(i)}return n}const _={broadcast:function(e){const t=e.type.replace(/^broadcast_/,"");w.triggerListener({type:t,data:e.data})},removeVideoLoading:function(e){const t=h({vid:e.vid});for(let n=0,o=t.length;n<o;n++){const o=t[n];o.style.display="";const i=o.parentNode,s=i.querySelectorAll('.js_img_placeholder[data-vid="'+e.vid+'"]');if(s&&s.length>0)for(let e=0,t=s.length;e<t;e++)i.removeChild(s[e]);w.triggerListener({type:"afterRemoveLoading",vid:e.vid})}},addVideoIframeHeight:function(e){if(!e.height)return;const t=h({vid:e.vid});if(0===t.length)return;const n=t[0],o=n.offsetHeight+1*e.height;n.setAttribute("height",o),n.setAttribute("data-additionalheight",e.height),n.style.setProperty&&n.style.setProperty("height",o+"px","important")},videoInited:function(e){m.videoInfo[e.vid]||(m.videoInfo[e.vid]={}),m.videoInfo[e.vid].ori_status=e.ori_status,m.videoInfo[e.vid].hit_bizuin=e.hit_bizuin,m.videoInfo[e.vid].hit_vid=e.hit_vid},showTips:function(e={}){e.msg&&window.weui.toast(e.msg)}};function f(e){let t;if(e.origin?t=e.origin:e.originalEvent&&(t=e.originalEvent.origin),!/^http(s)?\:\/\/mp\.weixin\.qq\.com$/.test(t)||!e.source)return;const n=e.data;if(n&&n.type){if(!/^mpvideo_/.test(n.type))return;const e=n.type.replace(/^mpvideo_/,"");/^broadcast_/.test(e)?_.broadcast({data:n.data,type:e}):_[e]&&_[e](n.data)}}window.addEventListener("message",f,!1),window.addEventListener("resize",(function(){const e=h();for(let t=0,n=e.length;t<n;t++){const n=e[t];setTimeout(function(e){return function(){if("function"!=typeof window.__getVideoWh)return;const t=window.__getVideoWh(e),n=t.w;let o=t.h;const i=1*e.getAttribute("data-additionalheight");i&&(o+=i),e.setAttribute("width",n),e.setAttribute("height",o),e.style.setProperty&&(e.style.setProperty("width",n+"px","important"),e.style.setProperty("height",o+"px","important"))}}(n),0)}}),!1);const g={getVideoInfo:function(){return m.videoInfo}};function y(e){if(!e)return null;let t=location.href.match(new RegExp("(\\?|&)"+e+"=([^&]+)"));return t?t[2]:null}const b={shareReport:function(n){let o=n.link,i=n.action_type,s=o.split("?").pop();if(s=s.split("#").shift(),""==s)return;let r=n.reportVid||window.reportVid||[],a=n.reportMid||window.reportMid||[],c=n.reportVoiceid||window.reportVoiceid,d=n.reportWeappid||window.reportWeappid,l=[],u=[],p=[];if(void 0===n.ori_status_arr||void 0===n.hit_bizuin_arr){let e=g.getVideoInfo();for(let t=0;t<r.length;t++){let n=r[t];e[n]&&void 0!==e[n].ori_status?l.push(e[n].ori_status):l.push(0),e[n]&&void 0!==e[n].hit_bizuin?u.push(e[n].hit_bizuin):u.push(""),e[n]&&void 0!==e[n].hit_vid?p.push(e[n].hit_vid):p.push("")}}else l=n.ori_status_arr,u=n.hit_bizuin_arr,p=n.hit_vid_arr;let w="";w=window.can_use_wecoin?window.wecoin_amount?10*window.wecoin_amount:"":window.paySubscribeInfo?window.paySubscribeInfo.fee:"";let m=[s,"action=share","action_type="+i,"scene="+(n.source||window.source||y("scene")),"subscene="+y("subscene"),"ascene="+(n.ascene||window.ascene||-1),"req_id="+(n.req_id||window.req_id||""),"vid="+(void 0!==r?r.join(";"):""),"musicid="+(void 0!==a?a.join(";"):""),"voiceid="+(void 0!==c?c.join(";"):""),"weappid="+(void 0!==d?d.join(";"):""),"item_show_type="+("16"===e.getQuery("item_show_type")?16:n.item_show_type||window.item_show_type||0),"ori_status_arr="+l.join(";"),"hit_bizuin="+u.join(";"),"hit_vid_arr="+p.join(";"),"top_stories="+(n.top_stories||0),"content_url="+encodeURIComponent(window.location.href),"channel_session_id="+y("channel_session_id"),"is_pay_subscribe="+window.isPaySubscribe,"is_paid="+window.isPaid,"preview_percent="+window.previewPercent,"fee="+w,"worthy_cnt="+(window.paySubscribeInfo?window.paySubscribeInfo.like_cnt:""),"pay_cnt="+(window.paySubscribeInfo?window.paySubscribeInfo.pay_cnt:""),"album_id="+(window.target_album_info?window.target_album_info.id:""),"album_type="+(window.target_album_info?0:""),"is_cartoon_copyright="+(window.isCartoonCopyright?1:2),"share_source="+n.share_source,"exptype="+window.exptype||"","expsessionid="+window.expsessionid||"","enterid="+window.enterid||0,"sessionid="+window.sessionid||0,"from_masonry="+window.is_new_img||0,"barversion="+window.bar_version||0];n.hotspotjson?m.push("hotspotjson="+n.hotspotjson):window.hotspotInfoList&&m.push("hotspotjson="+JSON.stringify({hotspotinfolist:window.hotspotInfoList})),n.sharer_shareinfo&&m.push("sharer_shareinfo="+n.sharer_shareinfo);const h=y("sharer_shareinfo_first")||n.sharer_shareinfo;h&&m.push("sharer_shareinfo_first="+h),m=m.join("&"),t({url:"/mp/appmsgreport",type:"POST",data:m,async:n.async||!1,timeout:2e3})},profileReport:function(e){t({url:"/mp/appmsgreport?action=name_click",data:{url:location.href,title:e.title||window.msg_title||"",msgid:window.mid||"",itemidx:window.idx||"",__biz:window.biz||"",ascene:window.ascene||-1,isnew:e.isnew||0,item_show_type:e.item_show_type||window.item_show_type||0,hotspotjson:e.hotspotjson||""},type:"POST",dataType:"json",async:!0,success:function(e){}})},hotspotReport:function(e){t({url:"/mp/appmsgreport?action=hotspotreport",data:{title:e.title||window.msg_title||"",__biz:window.biz||"",appmsgid:window.mid||"",itemidx:window.idx||"",scene:window.source||"",hotspotjson:e.hotspotjson||""},type:"POST",dataType:"json",async:!0,success:function(e){}})}};function v(){i.isWxWork&&(i.isAndroid||i.isIOS)?i.cpVersion("4.1.12",1,!0,"wxwork")?(console.log("[jsapi openMPURLInWechat] mpURL:",window.location.href),s.invoke("wwapp2.openMPURLInWechat",{mpURL:window.location.href},(function(e){console.log("[jsapi openMPURLInWechat] res:",e,JSON.stringify(e))}))):window.weui.alert("请升级企业微信版本"):window.weui.alert("请使用移动版微信")}const k=window.weEmoji,x=k&&k.EmojiData||[],E=n.getInnerHeight(),I=n.getInnerWidth(),W={inWechat:i.isWechat,windowWechat:i.isWindowsWechat,macWechat:i.isMacWechat,emojiImg:'<img src="https://res.wx.qq.com/mmbizappmsg/zh_CN/images/pic/pic_blank.gif" class="icon_emotion_single #style#" alt="#name#">',emojiDataMap:{}};(()=>{for(let e=0,t=x.length;e<t;e++){const t=x[e];t.cn&&!W.emojiDataMap[t.cn]&&(W.emojiDataMap[t.cn]={index:e}),t.hk&&!W.emojiDataMap[t.hk]&&(W.emojiDataMap[t.hk]={index:e}),t.us&&!W.emojiDataMap[t.us]&&(W.emojiDataMap[t.us]={index:e})}})();function S(e){if(!e)return null;const t=location.href.match(new RegExp("(\\?|&)"+e+"=([^&]+)"));return t?t[2].split("#")[0]:null}const T=(e,t,n={})=>{const o=()=>{s.invoke("openUrlWithExtraWebview",{url:e,openType:1},(function(n){-1==n.err_msg.indexOf("ok")&&(!0===t?window.parent.open(e):window.parent.location.href=e)}))};W.inWechat?W.windowWechat||W.macWechat?!0===t?window.parent.open(e):window.parent.location.href=e:n&&n.useFastLoad?s.invoke("openWebViewUseFastLoad",{url:e,item_show_type:1*window.item_show_type||0,openType:0,scene:1},(function(e){e&&e.err_msg&&-1==e.err_msg.indexOf("ok")&&o()})):o():!0===t?window.open(e):location.href=e};const j=(e,t={})=>{if("album"===e){const e={bizuin:window.biz,url:t.url+"",ActionType:1*t.actionType,Scene:1*window.source,Network:window.__networkType+"",AlbumId:t.albumId+"",AlbumType:1*t.albumType,ExpType:window.exptype||"",EnterId:window.enterid||"",SessionId:window.sessionid||"",ExpSessionIdStr:window.expsessionid||""};o.report(10380,e,{success:t=>{1*t.err_code!=0&&"undefined"!=typeof WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&window.WX_BJ_REPORT.BadJs.report("mmdata report failed","log_id: 10380",{mid:"mmbizwap:album_Monitor",_info:{postData:e,errCode:t.err_code,errMsg:t.err_msg}})}})}},M=(e,t,n)=>{const o=new RegExp("".concat(t,"=[^&]*"),"gi"),i="".concat(t,"=").concat(n);return o.test(e)?e.replace(o,i):e.replace(/(#.*)?$/,"".concat(e.indexOf("?")>-1?"&":"?").concat(i,"$1"))};function C(){r.on(window,"load",(function(){if(!window.__networkType&&W.inWechat){const e={"network_type:fail":"fail","network_type:edge":"2g/3g","network_type:wwan":"2g/3g","network_type:wifi":"wifi"};s.invoke("getNetworkType",{},(function(t){window.__networkType=e[t.err_msg]}))}}),!1)}const R=[1,24,2,3,43,22,23,5];let P=null;function A(e,t){let n,o;return function(){const i=this,s=arguments,r=+new Date;n&&r<n+t?(clearTimeout(o),o=setTimeout((function(){n=r,e.apply(i,s)}),t)):(n=r,e.apply(i,s))}}function O(){let e=0,t=0,n=0;return document.body&&(t=document.body.scrollTop),document.documentElement&&(n=document.documentElement.scrollTop),e=t-n>0?t:n,e}function z(){let e,t,n=0;return document.body&&(e=document.body.scrollHeight),document.documentElement&&(t=document.documentElement.scrollHeight),n=e-t>0?e:t,n}function L(){let e=0;return e="CSS1Compat"===document.compatMode?document.documentElement.clientHeight:document.body.clientHeight,e}const{enableSelect:B,disableSelect:q}=(()=>{const e=document.createElement("style");return e.innerHTML="* { -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }",{enableSelect(){document.head.contains(e)&&document.head.removeChild(e)},disableSelect(){document.head.appendChild(e)}}})(),U=(e,t=2)=>{for(let n=0,o=t-(e+"").length;n<o;n++)e="0"+e;return e+""};function V(){const e=document.querySelector("#js_article_bottom_bar"),t=document.querySelector(".bottom_bar_padding_mask");e&&(e.style.display="none"),t&&(t.style.display="none")}function N(e,t){const n=document.querySelector("#js_article_bottom_bar"),o=document.querySelector(".bottom_bar_padding_mask");n&&(n.style.display=e),o&&(o.style.display=t)}function H(){const e=getComputedStyle(document.body);return parseInt(e.getPropertyValue("--headimg-wall-avatar-width"))+parseInt(e.getPropertyValue("--headimg-wall-avatar-gap"))}const D={jumpUrl:T,closeWin:()=>{!W.inWechat||W.windowWechat||W.macWechat?window.close():s.invoke("closeWindow",(e=>{-1==e.err_msg.indexOf("ok")&&window.close()}))},trim:e=>"".concat(e||"").replace(/^\s+|\s+$/g,""),getId:e=>document.getElementById(e),qs:(e,t)=>(t||document).querySelector(e),qsAll:(e,t)=>(t||document).querySelectorAll(e),inWechat:W.inWechat,windowWechat:W.windowWechat,macWechat:W.macWechat,emojiFormat:e=>/\[[^\[\]]+\]/.test(e)?e.replace(/\[[^\[\]]+\]/g,(e=>{if(W.emojiDataMap[e]&&x[W.emojiDataMap[e].index]){const t=x[W.emojiDataMap[e].index];return W.emojiImg.replace("#name#",e).replace("#style#",t.style)}return e})):e,getParam:S,getParams:function(e){let t=[];const n={};if(!e)try{t=(e=window.top.location).search.substring(1).split("&")}catch(o){t=(e=window.location).search.substring(1).split("&")}"string"==typeof e&&(t=(e=new URL(e)).search.substring(1).split("&"));for(let i=0;i<t.length;i++){const e=t[i].split("="),o=decodeURIComponent(e.shift());void 0===n[o]&&(n[o]=decodeURIComponent(e.join("=")))}return n},genUrl:function(e,t,n){return"string"!=typeof e?"":(t&&"object"==typeof t&&Object.keys(t).length&&(e+="?"+Object.keys(t).map((e=>e+"="+encodeURIComponent(t[e]))).join("&")),n&&"string"==typeof n&&(e+="#"+n),e)},go2ProfileEvent:e=>{const t=e.$container;t&&!i.isInMiniProgram&&(P&&r.off(t,"tap",P),r.on(t,"tap",".js_go_profile",P=function(t){const n=t.delegatedTarget;if(n){const t=n.getAttribute("data-biz")||e.biz||window.biz||"";if("function"==typeof e.beforeGo2Profile&&e.beforeGo2Profile(n),1==window.isprofileblock)s.invoke("openUrlWithExtraWebview",{url:"https://mp.weixin.qq.com/mp/profileblock?__biz="+t+"#wechat_redirect",openType:1},(function(e){-1==e.err_msg.indexOf("ok")&&(location.href="https://mp.weixin.qq.com/mp/profileblock?__biz="+t+"#wechat_redirect")}));else{const t=n.getAttribute("data-scene")||e.profile_scene||"";b.profileReport({isnew:0,title:e.title||"",item_show_type:e.item_show_type||""}),console.log("channelSessionId"+S("channel_session_id")),s.invoke("profile",{username:e.user_name,profileReportInfo:"",scene:t+"",channelSessionId:S("channel_session_id"),subscene:e.subscene,tabType:e.tabType||1},(function(e){}))}}}))},prepareNativePage:function(e,t){s.invoke("createWebViewForFastLoad",{scene:1},(function(n){e.forEach((e=>{s.invoke("downloadPageDataForFastLoad",{itemList:[{item_show_type:5,url:e[t]}]},(function(e){console.log(e)}))}))}))},debounce:function(e,t,n){let o;return function(){const i=this,s=arguments,r=n&&!o;clearTimeout(o),o=setTimeout((function(){o=null,n||e.apply(i,s)}),t),r&&e.apply(i,s)}},throttle:A,formatReadNum:function(e,t){if("en"===window.LANG)return l.dealLikeReadShow_en(e);let n="";if(parseInt(e,10)>1e5)n="10万+";else if(parseInt(e,10)>1e4&&parseInt(e,10)<=1e5){const t=""+parseInt(e,10)/1e4,o=t.indexOf(".");n=-1===o?t+"万":t.substr(0,o)+"."+t.charAt(o+1)+"万"}else n=0===parseInt(e,10)?t?"0":"":e||"";return n},formatSeconds:function(e){let t=parseInt(e,10),n=0,o=0;t>60&&(n=parseInt(t/60,10),t=parseInt(t%60,10),n>60&&(o=parseInt(n/60,10),n=parseInt(n%60,10))),t<10&&(t="0"+t);let i=":"+t;return n>0?(n<10&&(n="0"+n),i=n+i):i="00"+i,o>0&&(0===parseInt(o,10)?o="":o<10&&(o="0"+o),i=o+":"+i),i},formatTimeToMinute:e=>{10===e.length&&(e*=1e3);const t=new Date(+e);return U(t.getHours())+":"+U(t.getMinutes())},setTwoTabHeight:function(e){if(window.hasChannelTwoTab&&n.isNewNativePage()){let t=0;t=document.getElementById("tab").offsetTop-window.__minHeight;const n=document.body.offsetHeight,o=E+t;if(n<o){const n=t+E-document.body.offsetHeight,o=document.createElement("div");o.setAttribute("class","empty_comment_element"),o.style.cssText="height: ".concat(n,"px;"),document.getElementById(e).appendChild(o)}window.minMountHeight=o}},getByClass:(e,t)=>(t||document).getElementsByClassName(e),getScrollTop:O,getScrollHeight:z,getWindowHeight:L,shareMessage:function(e={}){let t={appId:e.appId,img_url:e.img_url,img_width:e.img_width,img_height:e.img_height,link:e.link.replace(/<br\/>/g,"\n"),desc:e.desc.replace(/<br\/>/g,"\n"),title:e.title};C(),/#wechat_redirect/.test(t.link)||(t.link+="#wechat_redirect");let n="",o={url:t.link,actionType:0},i=j;e.isAlbum?(n="album",t=Object.assign({album_id:e.album_id,album_type:e.album_type},t),o=Object.assign({albumId:e.album_id,albumType:e.album_type},o)):"function"==typeof e.shareReport&&(i=(t,n)=>e.shareReport(n.actionType)),s.on("menu:share:appmessage",(s=>{let r;if(s&&"favorite"===s.scene?(r=24,t.link=M(t.link,"scene",R[1])):(r=1,t.link=M(t.link,"scene",R[0])),"function"==typeof e.beforeShare)try{t=e.beforeShare("menu:share:appmessage",t)||t}catch(c){}o.url=t.link,o.actionType=r,i(n,o),a(t)})),s.on("menu:share:timeline",(()=>{if(t.link=M(t.link,"scene",R[2]),o.url=t.link,o.actionType=2,"function"==typeof e.beforeShare)try{t=e.beforeShare("menu:share:timeline",t)||t}catch(s){}i(n,o),c(t)})),s.on("menu:share:weiboApp",(()=>{if(t.link=M(t.link,"scene",R[3]),o.url=t.link,o.actionType=3,"function"==typeof e.beforeShare)try{t=e.beforeShare("menu:share:weiboApp",t)||t}catch(r){}i(n,o),s.invoke("shareWeiboApp",{img_url:t.img_url,link:t.link,title:t.title})})),s.on("menu:share:facebook",(()=>{if(t.link=M(t.link,"scene",R[4]),o.url=t.link,o.actionType=7,"function"==typeof e.beforeShare)try{t=e.beforeShare("menu:share:facebook",t)||t}catch(r){}i(n,o),s.invoke("shareFB",t)})),s.on("menu:share:QZone",(()=>{if(t.link=M(t.link,"scene",R[5]),o.url=t.link,o.actionType=5,"function"==typeof e.beforeShare)try{t=e.beforeShare("menu:share:QZone",t)||t}catch(r){}i(n,o),s.invoke("shareQZone",t)})),s.on("menu:share:qq",(()=>{if(t.link=M(t.link,"scene",R[6]),o.url=t.link,o.actionType=5,"function"==typeof e.beforeShare)try{t=e.beforeShare("menu:share:qq",t)||t}catch(r){}i(n,o),s.invoke("shareQQ",t)})),s.on("menu:share:email",(()=>{if(t.link=M(t.link,"scene",R[7]),o.url=t.link,o.actionType=5,"function"==typeof e.beforeShare)try{t=e.beforeShare("menu:share:email",t)||t}catch(r){}i(n,o),s.invoke("sendEmail",{content:t.link,title:t.title})}))},getElementTop:function(e){return e.getBoundingClientRect().top},formatAlbumnReadNum:function(e,t){const n="en"===window.LANG,o=n?"k":"万";let i="";const s=1e4*t,r=n?10*t:t;if((e=parseInt(e,10))>s)i=r+o+"+";else if(e>=1e4&&e<=s){const t=""+(n?e/1e3:e/1e4),s=t.indexOf(".");i=-1===s?t+o:t.substr(0,s)+"."+t.charAt(s+1)+o}else i=e;return i||0},getElementHeight:function(e){return e.getBoundingClientRect().height},getQuery:function(e){const t=window.location.href,n=t.indexOf("?"),o=t.substr(n+1).split("&");for(let i=0;i<o.length;i++){const t=o[i].split("=");if(t[0].toUpperCase()==e.toUpperCase())return t[1]}return""},openAllVideoPage:function(e={}){const t="".concat(location.origin,"/mp/profile_ext?action=home&real_type=43&__biz=").concat(e.biz,"&scene=").concat(e.scene,"#wechat_redirect");T(t,!0)},getNetWorkType:C,getMoreVideoInfo:function(t,n){return"".concat(e.getQuery("__biz",t),"_").concat(e.getQuery("mid",t),"_").concat(e.getQuery("idx",t),"_").concat(n)},isPageEnd:function(){return O()+L()+30>=z()},openAlbumPage:function(e={}){const t=e.albumLink.replace("#wechat_redirect","")+"&scene=".concat(e.scene,"&is_first_screen=1&subscene=").concat(e.subscene,"&vid=").concat(e.vid,"&count=").concat(e.pageCount?e.pageCount:3,"&from_msgid=").concat(e.curMsgid?e.curMsgid:"","&from_itemidx=").concat(e.curItemidx?e.curItemidx:"","&scenenote=").concat(e.scenenote,"#wechat_redirect");T(t,!0)},checkExposedStatus:(e,t=.5,n="vertical",o=window)=>{if(!e)return!1;let i=!1,s=0,r=0,a=!1,c=!1;const d=o===o.window?I:o.getBoundingClientRect().width,l=o===o.window?E:o.getBoundingClientRect().height;switch("number"==typeof t?(s=t,r=t):(s=t.vertical,r=t.horizontal),n){case"vertical":a=!0;break;case"horizontal":c=!0;break;case"all":a=!0,c=!0}const u=e.getBoundingClientRect();if(a){const e=u.height*s;u.bottom>e&&u.top<l-e&&(i=!0)}if(!c)return i;if(a&&!i)return i;const p=u.width*r;return i=u.right>p&&u.left<d-p,i},isParent:(e,t)=>{for(;e;){if(e===t)return!0;e=e.parentNode}return!1},goUrl:(e,t={},n="webview")=>{if(!e)return;/^http/.test(e)||(e=location.protocol+"//"+location.host+e);const o=(-1===e.indexOf("?")?"?":"&")+Object.keys(t).map((e=>"".concat(e,"=").concat(t[e]))).join("&"),r=e.indexOf("#");if(-1===r?e+=o+"#wechat_redirect":e=e.slice(0,r)+o+e.slice(r),"webview"===n)-1!==navigator.userAgent.indexOf("MicroMessenger")&&(i.isIOS||i.isAndroid||i.isWp||d.os.pc)?s.invoke("openUrlWithExtraWebview",{url:e,openType:1},(t=>{-1===t.err_msg.indexOf("ok")&&(location.href=e)})):location.href=e;else location.href=e},changeURLArg:M,getUrlParamsMap:e=>{if(!e||!e.length)return{};const t=e.indexOf("?"),n={};return t>-1&&e.slice(t+1,e.indexOf("#")>-1?e.indexOf("#"):void 0).split("&").forEach((e=>{if(e){const t=e.indexOf("=");t>-1?n[e.slice(0,t)]=e.slice(t+1):n[e]=""}})),n},numFormat2Unit:(e=0,t=1)=>{if("number"!=typeof e||"number"!=typeof t)throw new Error("".concat(e," and ").concat(t," should be a number."));const n={value:0,unit:""};let o=1e4,i=["","万","亿","万亿"],s=0;return"en"===window.LANG&&(o=1e3,i=["","k","m","b"]),e<o?(n.value=e,n.unit=""):(s=Math.floor(Math.log(e)/Math.log(o)),n.value=(e/Math.pow(o,s)).toFixed(t),n.unit=i[s]),n.value+n.unit},goProfile:function(e={},t={},n=(()=>{})){i.isWechat?i.isIOS||i.isAndroid||i.isWindows&&i.cpVersion("3.4.5",1,!0,"windows")||i.isMacWechat&&i.cpVersion("3.5.0",1,!0,"mac")||d.os.Linux?s.invoke("profile",t,n):location.href="/mp/profile_ext?action=home&__biz=".concat(e.biz,"&scene=").concat(e.scene,"#wechat_redirect"):i.isWxWork?v():i.isDonutAPP&&s.invoke("profile",t,n)},getDefaultFontSize:e=>{e=e||document.body;const t=document.createElement("div");t.style.width="1000em",e.appendChild(t);const n=t.offsetWidth/1e3;return e.removeChild(t),n},enableSelect:B,disableSelect:q,reportBottomBar:e=>{try{const t="biz=".concat(window.biz,"&mid=").concat(window.mid,"&idx=").concat(window.idx);let n="different_state";const o={},{like_info:i,old_like_info:s,share_info:r,collect_info:a,comment_info:c}=e,{show_like:d,show_old_like:l,show_share:u,show_collect:p,comment_enabled:w,like_count:m,old_like_count:h,share_count:_,collect_count:f,comment_count:g}=window.appmsg_bar_data;1*i.show!=1*d&&(n+="|like",o.ext_like_show=i.show,o.ext_like_count=i.count,o.ext_show_gray=i.show_gray,o.sk_like_show=d,o.sk_like_count=m),1*s.show!=1*l&&(n+="|old_like",o.ext_old_like_show=s.show,o.ext_old_like_count=s.count,o.ext_show_gray=s.show_gray,o.sk_old_like_show=l,o.sk_old_like_count=h),1*r.show!=1*u&&(n+="|share",o.ext_share_show=r.show,o.ext_share_count=r.count,o.ext_show_gray=r.show_gray,o.sk_share_show=u,o.sk_share_count=_),7===window.bar_version&&1*a.show!=1*p&&(n+="|collect",o.ext_collect_show=a.show,o.ext_collect_count=a.count,o.ext_show_gray=a.show_gray,o.sk_collect_show=p,o.sk_collect_count=f),1*c.comment_enabled!=1*w&&(n+="|comment",o.ext_comment_enabled=c.comment_enabled,o.ext_comment_count=c.count,o.sk_comment_enabled=w,o.sk_comment_count=g),"different_state"!==n&&window.WX_BJ_REPORT&&window.WX_BJ_REPORT.BadJs&&window.WX_BJ_REPORT.BadJs.report(n,"".concat(t),{mid:"mmbizwap:bottom_bar_report",view:"wap_business",_info:o})}catch(t){}},elementVisibleController:function(e){const t=document.querySelector("#js_article_bottom_bar"),n=document.querySelector(".bottom_bar_padding_mask"),o=t&&t.style.display||"",r=n&&n.style.display||"";window.addEventListener("beforeprint",(()=>{V()})),window.addEventListener("afterprint",(()=>{N(o,r)})),i.isAndroid&&i.getInner()>"28003252"&&(s.on("startCapture",(t=>{console.log("开始截图时",t),(null==e?void 0:e.onStartCapture)&&"function"==typeof e.onStartCapture&&e.onStartCapture(),V()})),s.on("endCapture",(t=>{console.log("截图结束时",t),(null==e?void 0:e.onEndCapture)&&"function"==typeof e.onEndCapture&&e.onEndCapture(),N(o,r)})),s.on("endCaptureEdit",(t=>{console.log("截图编辑结束时",t),(null==e?void 0:e.onEndCaptureEdit)&&"function"==typeof e.onEndCaptureEdit&&e.onEndCaptureEdit()})))},headimgLineCount:2,getHeadimgTotalCount:function(e={}){const t=e.pageContainerId||"js_base_container",n=e.imageContentId||"img-content",o=e.headimgLineCount||2;if(!document.getElementById(t))return;const i=()=>{var i;let s=window.innerWidth||document.documentElement.clientWidth;try{const e=document.getElementById(t).getBoundingClientRect();if(e.width&&(s=e.width-40),document.getElementById(n)){const e=document.getElementById(n).getBoundingClientRect();e.width&&(s=e.width)}}catch(a){console.error(a)}const r=(Math.floor((s-32)/H())||0)*o;return null==(i=e.cb)||i.call(e,r),r};let s=window.innerWidth;return e.cb&&r.on(window,"resize",A((function(){window.innerWidth!==s&&(s=window.innerWidth,i())}))),setTimeout((()=>{i()}),20),i()},formatNum:function(e){return e>=1e4?"en"===window.LANG?"10k+":"1万+":e||0},getHeadimgWallItemWidth:H};export{b as A,w as I,g as V,D as p,v as w};
